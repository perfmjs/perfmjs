!function(){"use strict";var _namespace=function(){for(var t,e,n,r,i=arguments,s=0;s<i.length;s++)if(t=window,r=i[s],r.indexOf("."))for(n=r.split("."),e="window"==n[0]?1:0;e<n.length;e++)t[n[e]]=t[n[e]]||{},t=t[n[e]];else t[r]=t[r]||{}};_namespace("perfmjs.sysconfig","perfmjs.json","perfmjs.includeres","perfmjs.loadres","perfmjs.app","perfmjs.model"),"undefined"!=typeof module&&module.exports&&(module.exports=perfmjs),perfmjs.currentDomain="",perfmjs.plugins={},perfmjs.utils={namespace:_namespace,isBrowserSupport:function(){return!this.isNodeJSSupport()},isNodeJSSupport:function(){return"undefined"!=typeof module&&module.exports?!0:!1},isAmdSupport:function(){return"function"==typeof define&&define.amd&&define.amd.async},isH5Supported:function(){return-1===-[1]},isJQueryLoaded:function(){return"undefined"!=typeof jQuery},getJQuery:function(){return this.isJQueryLoaded()?jQuery:{}},isObject:function(t){return t===Object(t)},keys:function(t){if(!this.isObject(t))return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&(e[e.length]=n);return e},_fastBind:function(t,e){var n,r=arguments.length-2;if(r>0){n=new Array(r);for(var i=0;r>i;i++)n[i]=arguments[i+2];return function(){var i,s=arguments.length,o=new Array(r+s);for(i=0;r>i;i++)o[i]=n[i];for(i=0;s>i;i++)o[r+i]=arguments[i];return t.apply(e,o)}}return function(){var n,r=arguments.length,i=new Array(r);for(n=0;r>n;n++)i[n]=arguments[n];return t.apply(e,i)}},forEach:function(t,e,n){var r,i=t.length,s=arguments.length>2?this._fastBind(e,n):e;for(r=0;i>r;r++)s(t[r],r,t)},fastMap:function(t,e,n){var r,i=t.length,s=new Array(i),o=arguments.length>2?this._fastBind(e,n):e;for(r=0;i>r;r++)s[r]=o(t[r],r,t);return s},fastReduce:function(t,e,n,r){var i,s=t.length,o=n,a=arguments.length>3?this._fastBind(e,r):e;for(i=0;s>i;i++)o=a(o,t[i],i,t);return o},toNumber:function(t){return~~t},toBoolean:function(t){return!!t},_class2type:void 0,type:function(t){if(void 0===this._class2type){var e=this._class2type={};this.forEach("Boolean Number String Function Array Date RegExp Object".split(" "),function(t){e["[object "+t+"]"]=t.toLowerCase()})}return null==t?String(t):this._class2type[Object.prototype.toString.call(t)]||"object"},isString:function(t){return"string"==typeof t},isFunction:function(t){return"function"===this.type(t)},isArray:Array.isArray||function(t){return"array"===this.type(t)},isWindow:function(t){return null!=t&&t==t.window},_isPlainObject:function(t){var e=Object.prototype.hasOwnProperty;if(!t||"object"!==this.type(t)||t.nodeType||this.isWindow(t))return!1;try{if(t.constructor&&!e.call(t,"constructor")&&!e.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in t);return void 0===r||e.call(t,r)},extend:function(){var t,e,n,r,i,s,o=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},a=2),"object"==typeof o||this.isFunction(o)||(o={}),u===a&&(o=this,--a);u>a;a++)if(null!=(t=arguments[a]))for(e in t)n=o[e],r=t[e],o!==r&&(c&&r&&(this._isPlainObject(r)||(i=this.isArray(r)))?(i?(i=!1,s=n&&this.isArray(n)?n:[]):s=n&&this._isPlainObject(n)?n:{},o[e]=this.extend(c,s,r)):void 0!==r&&(o[e]=r));return o},trim:String.prototype.trim&&!String.prototype.trim.call("﻿ ")?function(t){return null==t?"":String.prototype.trim.call(t)}:function(t){return null==t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},now:function(){return(new Date).getTime()},error:function(t){throw new Error(t)},parseJSON:function(t){return t&&"string"==typeof t?(t=this.trim(t),window.JSON&&window.JSON.parse?window.JSON.parse(t):/^[\],:{}\s]*$/.test(t.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+t)():(this.error("Invalid JSON: "+t),void 0)):null},debugJSON:function(t){return"object"==typeof JSON&&JSON.stringify?JSON.stringify(t):"null"},merge:function(t,e){var n=e.length,r=t.length,i=0;if("number"==typeof n)for(;n>i;i++)t[r++]=e[i];else for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},fmtJSONMsg:function(jsonData){var result,jsonMessage={status:"fail",code:"0",msg:"",result:{}};try{result="string"==typeof jsonData?"object"==typeof JSON&&JSON.parse?JSON.parse(jsonData):eval("("+jsonData+")"):jsonData,void 0!=result&&void 0==result.status?(jsonMessage.status="success",jsonMessage.code="0",jsonMessage.msg="",jsonMessage.result=result):void 0!=result&&(jsonMessage=result)}catch(err){jsonMessage={status:"fail",code:"0",msg:"服务器响应失败，请稍后重试或联系我们的客服！",result:{}}}return jsonMessage||{status:"fail",code:"0",msg:"",result:{}}},aop:function(t,e,n,r){var i=this,s=function(){var s,o;return t=t||this,n&&"function"==typeof n&&(s=n.apply(t,arguments),"undefined"!=typeof s)?s:(s=i.isArray(s)?s:arguments,o=e.apply(t,s),r&&"function"==typeof r&&(Array.prototype.unshift.call(s,o),o=r.apply(t,s)||o),o)};return s},nextTick:"undefined"!=typeof module&&module.exports?function(t,e){process.nextTick(function(){t(e)})}:function(t,e){setTimeout(function(){t(e)},0)},end:0},perfmjs.plugin=function(t,e,n){var r=perfmjs.utils.isString(t)?t:t.name;if(n=n||!0,e=perfmjs.utils.isFunction(t)?t:e,!perfmjs.utils.isFunction(e))throw"Plugin fn required!";if(perfmjs.plugins[r])throw"Plugin name ["+r+" ] is existed!";r&&e&&(perfmjs.plugins[r]=e),n&&!e(perfmjs)},perfmjs.plugin.start=function(t){perfmjs.plugins[t]&&perfmjs.plugins[t](perfmjs)},perfmjs.ready=function(t){perfmjs.utils.isFunction(t)&&perfmjs.loadres.ready(document,function(){t(perfmjs,perfmjs.app.newInstance())})}}(),perfmjs.plugin("sysconfig",function(t){t.sysconfig.events={moduleIsReady:"perfmjs.ready",end:0}}),!function(t){t=t||window,t.base=function(e,n,r,i){e.indexOf("base.")<0&&(e="base."+e);var s=e.split(".").slice(0,e.split(".").length-1).join(".");e=e.split(".")[e.split(".").length-1];for(var o=s.split(".").length,a=s.split("."),u=0;o>u;u++)t[s]=1>u?t[a[0]]:t[s][a[u]],i=t.utils.extend({},i,t[s].defaults),r=t.utils.extend(!0,{},r,t[s].prototype);t[s]=t[s]||{},t[e]=t.base[e]=t[s][e]=function(n,r){n=void 0===n?!0:n,this.namespace=s,this.name=e,this.options=t.utils.extend({},i,t[s][e].defaults,r),n&&this.init(),this.options.scope||(this.options.scope="singleton"),"singleton"===this.options.scope&&(t[e].instance=this)},t[s][e].newInstance=function(n,r){if(t[e].instance)return t[e].instance;var i=new t[s][e](!1,r);return i.init(n),i},t[s][e].prototype=t.utils.extend(!0,{},r,n),t[s][e].prototype._super=function(t,e){return r[t].call(this,e)}},t.base.prototype={init:function(){return this},option:function(t,e){return"string"==typeof t&&this.options.hasOwnProperty(t)?"undefined"==typeof e?this.options[t]:this.options[t]=e:void 0}},t.base.defaults={scope:"singleton",end:0}}(perfmjs),perfmjs.plugin("joquery",function(t){t.base("joquery",{init:function(){return void 0===arguments?this:(this.items=arguments[0].slice(),this)},toArray:function(){return this.items},where:function(e,n){for(var r=new Array,i=0;i<this.items.length&&(!e(this.items[i],i)||(r[r.length]=this.items[i],!n));i++);return t.joquery.newInstance(r)},select:function(e){for(var n=new Array,r=0;r<this.items.length;r++)e(this.items[r])&&(n[n.length]=this.items[r]);return t.joquery.newInstance(n)},orderBy:function(e){return t.joquery.newInstance(this.items.slice().sort(function(t,n){var r=e(t),i=e(n);return i>r?-1:r>i?1:0}))},orderByDesc:function(e){return t.joquery.newInstance(this.items.slice().sort(function(t,n){var r=e(n),i=e(t);return i>r?-1:r>i?1:0}))},selectMany:function(e){for(var n=new Array,r=0;r<this.items.length;r++)n=n.concat(e(this.items[r]));return t.joquery.newInstance(n)},count:function(t){return null==t?this.items.length:this.where(t).items.length},distinct:function(e){for(var n,r={},i=[],s=0;s<this.items.length;s++)n=e(this.items[s]),r[n]||(r[n]=!0,i[i.length]=this.items[s]);return r=null,t.joquery.newInstance(i)},any:function(t){for(var e={matched:!1,index:-1,item:{}},n=0;n<this.items.length;n++)if(t(this.items[n],n))return{matched:!0,index:n,item:this.items[n]};return e},all:function(t){for(var e=0;e<this.items.length;e++)if(!t(this.items[e],e))return!1;return!0},reverse:function(){for(var e=new Array,n=this.items.length-1;n>-1;n--)e[e.length]=this.items[n];return t.joquery.newInstance(e)},first:function(t){return null!=t?this.where(t,!0).first():this.items.length>0?this.items[0]:null},last:function(t){return null!=t?this.reverse().first(t):this.items.length>0?this.items[this.items.length-1]:null},elementAt:function(t){return this.items[t]},concatArray:function(e){var n=e.items||e;return t.joquery.newInstance(this.items.concat(n))},intersect:function(e,n){var r;r=void 0!=n?n:function(t,e,n){return t==n};for(var i=e.items||e,s=new Array,o=0;o<this.items.length;o++)for(var a=0;a<i.length;a++)r(this.items[o],o,i[a],a)&&(s[s.length]=this.items[o]);return t.joquery.newInstance(s)},defaultIfEmpty:function(t){return 0==this.items.length?t:this},elementAtOrDefault:function(t,e){return t>=0&&t<this.items.length?this.items[t]:e},firstOrDefault:function(t){return this.first()||t},lastOrDefault:function(t){return this.last()||t},insert:function(t,e){var n={matched:!1,index:-1,item:{}};if(this.items.length<1)return this.items.splice(0,0,t),{matched:!0,index:0,item:t};for(var r=0;r<this.items.length;r++)if(e(this.items[r],r))return this.items.splice(r,0,t),{matched:!0,index:r,item:t};return n.matched?n:(this.items[this.items.length]=t,{matched:!0,index:this.items.length-1,item:t})},updateOrInsert:function(t,e,n){var r={matched:!1,index:-1,item:{}};if(this.items.length<1)return this.items.splice(0,0,t),{matched:!0,index:0,item:t};for(var i=0;i<this.items.length;i++){if(void 0!=e&&e(this.items[i],i))return this.items[i]=t,{matched:!0,index:i,item:t};if(n(this.items[i],i))return this.items.splice(i,0,t),{matched:!0,index:i,item:t}}return r.matched?r:(this.items[this.items.length]=t,{matched:!0,index:this.items.length-1,item:t})}}),t.joquery.defaults={scope:"prototype",end:0}}),perfmjs.plugin("async",function(t){!function(e){"use strict";t.utils.isNodeJSSupport()?e(exports):t.utils.isAmdSupport()?define("async",function(){return e()}):t.utils.isBrowserSupport()&&(t.async=e())}(function(e){"use strict";var n=function(){},r=function(){},i=function(e,n){var s=null;if(e.promise===n)return e.reject(new TypeError("Cannot resolve a promise with itself"));if(n instanceof r)return"fulfilled"===n.state?e.fulfill(n.result):"rejected"===n.state?e.reject(n.result):n.then(e.fulfill,e.reject);try{if(!t.utils.isObject(n)&&!t.utils.isFunction(n)||!t.utils.isFunction(s=n.then))return e.fulfill(n)}catch(o){e.reject(o)}s(function(t){i(e,t)},function(t){e.reject(t)})},s=function(t,e){return function(n){try{i(e,t(n))}catch(r){e.reject(r)}}},o=function(){var e,a="pending",u=[],c=[],l=new r,f=null,p=function(n,r){if("rejected"!==a){t.utils.isFunction(n)||(n=function(t){return t});var i=s(n,r);"fulfilled"===a?t.utils.nextTick(i,e):u.push(i)}},h=function(n,r){if("fulfilled"!==a){t.utils.isFunction(n)||(n=function(t){throw t});var i=s(n,r);"rejected"===a?t.utils.nextTick(i,e):c.push(i)}},d=function(t){if("pending"===a){a="fulfilled";for(var n=0,r=u.length;r>n;++n)u[n](t);return u=[],e=t,l}},m=function(t){if("pending"===a){a="rejected";for(var n=0,r=c.length;r>n;++n)c[n](t);return c=[],e=t,l}};return l.then=function(t,e){var n=o();return p(t,n),h(e,n),n.promise},l.state=a,l.result=e,n.prototype=l,f=new n,f.promise=l,f.fulfill=d,f.reject=m,f.resolve=function(t){i(this,t)},f};return e=e||{},e.defer=o,e.version="1.0.0",e})}),perfmjs.plugin("amd",function(t){var e=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,n=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,r={},i={},s={require:{id:"require",getInstance:function(){return function(t){if("string"==typeof t){if(s[t])return s[t].getInstance;throw new Error(t+" has not been defined. Please include it as a dependency in define()")}}}()},exports:{id:"exports",getInstance:function(){return s}()},module:{id:"module",getInstance:function(){return function(t){return{id:t,uri:o.toUrl(t)}}}}},o={};define=function(t,r,s){var o=arguments.length;1===o?(s=t,r=void 0,t=void 0):2===o&&("[object Array]"==={}.toString.call(t)?(s=r,r=t,t=void 0):(s=r,r=void 0)),r||"function"!=typeof s||(r=[],s.length&&(s.toString().replace(e,"").replace(n,function(t,e){r.push(e)}),r=(1===s.length?["require"]:["require","exports","module"]).concat(r))),t&&!i[t]&&(i[t]={id:t,deps:r||[],callback:s})},require=function(e,n,r){var a=[],u=t.async.defer();"string"!=typeof e&&(o.loadParsedRequireStack(e,[],0,u),u.promise.then(function(){o.getDepsStack(e,a),a.sort(function(t,e){for(var n=i[t].deps||[],r=0,s=i[e].deps||[],o=0,a=0;a<n.length;a++)"require"!==n[a]&&"exports"!==n[a]&&"module"!==n[a]&&r++;for(var u=0;u<s.length;u++)"require"!==s[u]&&"exports"!==s[u]&&"module"!==s[u]&&o++;return o-r});for(var t=a.length-1;t>=0;t--){var u=a[t];s[u]||(s[u]={id:u,getInstance:function(){for(var t=[],e=i[u].deps,n=0;n<e.length;n++)(s[e[n]]||{}).getInstance&&(t[t.length]=(s[e[n]]||{}).getInstance);return i[u].callback.apply(null,t)}()})}for(var c=[],l=0;l<e.length;l++)switch(e[l]){case"require":c[l]=s.require.getInstance;break;case"exports":c[l]=s.exports.getInstance("context");break;case"module":c[l]=s.module.getInstance()("context");break;case s[r]?s[r].id:"":c[l]=s[r].getInstance();break;default:c[l]=s[e[l]].getInstance}n&&n.apply(null,c)}))},define.config={baseUrl:"http://localhost:63342/perfmjs/lib/amd/",alias:{xxx:"plugins/xxx.min"},usingInclude:{"default":!0,module:{foo:!1}},shim:{backbone:{deps:["underscore","jquery"],exports:"Backbone"}}},define.amd={async:!0},o.getDepsStack=function(t,e,n){n=n||{},"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++){var s=t[r];if("require"!==s&&"exports"!==s&&"module"!==s&&i[s]){if(n[s])continue;n[s]=!0,e[e.length]=s;for(var a=i[s].deps||[],u=a.length-1;u>=0;u--)o.getDepsStack(a[u],e,n)}}},o.loadParsedRequireStack=function(e,n,r,s){var a=[];n=n||[],o.parseRequireStack(e,n);for(var u=0;u<n.length;u++)a[a.length]=o.toUrl(n[u])+".js";1>r&&a.length<1&&s.resolve(e),a.length>0&&(r+=a.length,t.includeres.loadHeadRes(a,function(){r-=a.length;for(var t=[],e=0;e<n.length;e++)t=t.concat(i[n[e]].deps);o.loadParsedRequireStack(t,[],r,s)}))},o.parseRequireStack=function(t,e){"string"==typeof t&&(t=[t]),e=e||[];for(var n=0;n<t.length;n++){var s=t[n];if(!r[s])switch(r[s]=!0,s){case"require":break;case"exports":break;case"module":break;default:i[s]?i[s].deps&&i[s].deps.length>0&&o.parseRequireStack(i[s].deps,e):e.splice(0,0,s)}}},o.toUrl=function(t,e){var n,r,i;switch(define.config.alias[t]&&(t=define.config.alias[t]),t){case"require":case"exports":case"module":return t}for(n=(e||define.config.baseUrl).split("/"),n.pop(),t=t.split("/"),r=t.length;--r;)switch(t[0]){case"..":n.pop();case".":case"":t.shift(),i=!0}return n.join("/")+"/"+t.join("/")}}),perfmjs.plugin("browser",function(t){t.browser={init:function(){this.browser=this._searchString(this._dataBrowser)||"An unknown browser",this.version=this._searchVersion(navigator.userAgent)||this._searchVersion(navigator.appVersion)||"an unknown version",this.os=this._searchString(this._dataOS)||"an unknown OS",this.ok=!0},info:function(){return void 0===this.ok&&this.init(),this.browser+" "+this.version+" "+this.os},msie:function(){return void 0===this.ok&&this.init(),"Explorer"===this.browser},_searchString:function(t){for(var e=0;e<t.length;e++){var n=t[e].string,r=t[e].prop;if(this.version_searchString=t[e].versionSearch||t[e].identity,n){if(-1!=n.indexOf(t[e].subString))return t[e].identity}else if(r)return t[e].identity}},_searchVersion:function(t){var e=t.indexOf(this.version_searchString);if(-1!=e)return parseFloat(t.substring(e+this.version_searchString.length+1))},_dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],_dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]}}),!function(){DEBUG_MOD=!1,perfmjs.logger=function(){},perfmjs.logger.level=4,perfmjs.logger.setLevel=function(t){perfmjs.logger.level=t};var t=!1;perfmjs.utils.extend(perfmjs.logger.prototype,{level:perfmjs.logger.level,setEnableLevel:function(t){(t>4||0>t)&&this.error(["wrong level setting. level should be 0-4, the int type,you set ",t,", so stupided."].join("")),this.level=parseInt(t)},enabled:function(t){return t>perfmjs.logger.level?!1:!0},name:function(){return this._name},log:function(){this._log(4,arguments)},debug:function(){this._log(3,arguments)},info:function(){this._log(2,arguments)},warn:function(){this._log(1,arguments)},error:function(){this._log(0,arguments)},_handler:function(t,e,n){return},_log:function(t,e){this.enabled(t)&&this._handler(t,this.name(),e)},_getBrowserInfo:function(){return perfmjs.browser.info()},_prepare:function(){perfmjs.utils.getJQuery()("#DEBUG").remove(),perfmjs.utils.getJQuery()(document.head).before('<div id="DEBUG" style="margin-top:10px;padding:8px;border:dashed 1px #FF7300;background-color:#EEE;color:#000;"><ol></ol></div>'),t=!0},end:0});var e={};perfmjs.logger=function(t){return e[t]||(e[t]=new perfmjs.logger(t),e[t]._name=t),e[t]}("perfmjs"),DEBUG_MOD?perfmjs.logger.setEnableLevel(4):perfmjs.logger.setEnableLevel(2)}(window),!function(t,e){"use strict";function n(){}function r(t,e){if(t){"object"==typeof t&&(t=[].slice.call(t));for(var n=0,r=t.length;r>n;n++)e.call(t,t[n],n)}}function i(t,n){var r=Object.prototype.toString.call(n).slice(8,-1);return n!==e&&null!==n&&r===t}function s(t){return i("Function",t)}function o(t){return i("Array",t)}function a(t){var e=t.split("/"),n=e[e.length-1],r=n.indexOf("?");return-1!==r?n.substring(0,r):n}function u(t){t=t||n,t._done||(t(),t._done=1)}function c(t,e,r,i){var s="object"==typeof t?t:{test:t,success:e?o(e)?e:[e]:!1,failure:r?o(r)?r:[r]:!1,callback:i||n},a=!!s.test;return a&&s.success?(s.success.push(s.callback),M.load.apply(null,s.success)):!a&&s.failure?(s.failure.push(s.callback),M.load.apply(null,s.failure)):i(),M}function l(t){var e={};if("object"==typeof t)for(var n in t)t[n]&&(e={name:n,url:t[n]});else e={name:a(t),url:t};var r=k[e.name];return r&&r.url===e.url?r:(k[e.name]=e,e)}function f(t){t=t||k;for(var e in t)if(t.hasOwnProperty(e)&&t[e].state!==q)return!1;return!0}function p(t){t.state=F,r(t.onpreload,function(t){t.call()})}function h(t){t.state===e&&(t.state=I,t.onpreload=[],v({url:t.url,type:"cache"},function(){p(t)}))}function d(){var t=arguments,e=t[t.length-1],n=[].slice.call(t,1),i=n[0];return s(e)||(e=null),o(t[0])?(t[0].push(e),M.load.apply(null,t[0]),M):(i?(r(n,function(t){!s(t)&&t&&h(l(t))}),g(l(t[0]),s(i)?i:function(){M.load.apply(null,n)})):g(l(t[0])),M)}function m(){var t=arguments,e=t[t.length-1],n={};return s(e)||(e=null),o(t[0])?(t[0].push(e),M.load.apply(null,t[0]),M):(r(t,function(t){t!==e&&(t=l(t),n[t.name]=t)}),r(t,function(t){t!==e&&(t=l(t),g(t,function(){f(n)&&u(e)}))}),M)}function g(t,e){return e=e||n,t.state===q?(e(),void 0):t.state===L?(M.ready(t.name,e),void 0):t.state===I?(t.onpreload.push(function(){g(t,e)}),void 0):(t.state=L,v(t,function(){t.state=q,e(),r(_[t.name],function(t){u(t)}),x&&f()&&r(_.ALL,function(t){u(t)})}),void 0)}function y(t){t=t||"";var e=t.split("?")[0].split(".");return e[e.length-1].toLowerCase()}function v(e,r){function i(e){e=e||t.event,a.onload=a.onreadystatechange=a.onerror=null,r()}function s(n){n=n||t.event,("load"===n.type||/loaded|complete/.test(a.readyState)&&(!O.documentMode||O.documentMode<9))&&(t.clearTimeout(e.errorTimeout),t.clearTimeout(e.cssTimeout),a.onload=a.onreadystatechange=a.onerror=null,r())}function o(){if(e.state!==q&&e.cssRetries<=20){for(var n=0,r=O.styleSheets.length;r>n;n++)if(O.styleSheets[n].href===a.href)return s({type:"load"}),void 0;e.cssRetries++,e.cssTimeout=t.setTimeout(o,250)}}r=r||n;var a,u=y(e.url);"css"===u?(a=O.createElement("link"),a.type="text/"+(e.type||"css"),a.rel="stylesheet",a.href=e.url,e.cssRetries=0,e.cssTimeout=t.setTimeout(o,500)):(a=O.createElement("script"),a.type="text/"+(e.type||"javascript"),a.src=e.url),a.onload=a.onreadystatechange=s,a.onerror=i,a.async=!1,a.defer=!1,e.errorTimeout=t.setTimeout(function(){i({type:"timeout"})},7e3);var c=O.head||O.getElementsByTagName("head")[0];c.insertBefore(a,c.lastChild)}function j(){for(var t=O.getElementsByTagName("script"),e=0,n=t.length;n>e;e++){var r=t[e].getAttribute("data-headjs-load");if(r)return M.load(r),void 0}}function w(t,e){if(t===O)return x?u(e):E.push(e),M;if(s(t)&&(e=t,t="ALL"),o(t)){var n={};return r(t,function(t){n[t]=k[t],M.ready(t,function(){f(n)&&u(e)})}),M}if("string"!=typeof t||!s(e))return M;var i=k[t];if(i&&i.state===q||"ALL"===t&&f()&&x)return u(e),M;var a=_[t];return a?a.push(e):a=_[t]=[e],M}function b(){return O.body?(x||(x=!0,j(),r(E,function(t){u(t)})),void 0):(t.clearTimeout(M.readyTimeout),M.readyTimeout=t.setTimeout(b,50),void 0)}function S(){O.addEventListener?(O.removeEventListener("DOMContentLoaded",S,!1),b()):"complete"===O.readyState&&(O.detachEvent("onreadystatechange",S),b())}var x,O=t.document,E=[],_={},k={},A="async"in O.createElement("script")||"MozAppearance"in O.documentElement.style||t.opera,D=t.head_conf&&t.head_conf.head||"head",M=t[D]=t[D]||function(){M.ready.apply(null,arguments)},I=1,F=2,L=3,q=4;if("complete"===O.readyState)b();else if(O.addEventListener)O.addEventListener("DOMContentLoaded",S,!1),t.addEventListener("load",b,!1);else{O.attachEvent("onreadystatechange",S),t.attachEvent("onload",b);var C=!1;try{C=!t.frameElement&&O.documentElement}catch(T){}C&&C.doScroll&&!function N(){if(!x){try{C.doScroll("left")}catch(e){return t.clearTimeout(M.readyTimeout),M.readyTimeout=t.setTimeout(N,50),void 0}b()}}()}M.load=M.js=A?m:d,M.test=c,M.ready=w,M.ready(O,function(){f()&&r(_.ALL,function(t){u(t)}),M.feature&&M.feature("domloaded",!0)}),perfmjs.loadres=M}(window),!function($$){perfmjs.includeres={writejs:function(t,e){document.write('<script type="text/javascript" src='+t+' charset="'+(e||"UTF-8")+'"></script>')},writecss:function(t,e){if(e=e||!0){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}else document.write('<link type="text/css" rel="stylesheet" href="'+t+'" />')},loadHeadRes:function(){for(var t=arguments,e=[],n=0;n<t.length;n++)perfmjs.utils.isArray(t[n])?e=e.concat(t[n]):e[e.length]=t[n];perfmjs.loadres.js.apply(null,e)},load:function(t){this._parseLoadedRes(t);for(var e=this.sources.length,n=this.getVersion(),r=[],i=0;e>i;i++){var s=this.sources[i];void 0!=s.f&&""!=s.f&&(r[r.length]=s.f+"?v="+n)}r=perfmjs.joquery.newInstance(r).distinct(function(t){return t}).toArray();for(var o=r.length,a=0;o>a;a++)this.writejs(r[a]);return this},loadedModuleName:{},loadModules:function(t){if(t=perfmjs.utils.extend({name:"js-comm",type:"js",mdCallback:function(){},handleUrlsCallback:function(){},afterLoadedCallback:function(){}},t),"undefined"!=typeof perfmjs.includeres.sources){var e=perfmjs.includeres.sources;if(e=perfmjs.joquery.newInstance(e).select(function(e){return e.n===t.name&&e.t===t.type}).toArray(),e.length<1)return this;for(var n=[],r=e.length,i=0;r>i;i++)if(!perfmjs.includeres.loadedModuleName[e[i].n]){var s=e[i];void 0!==s.d&&""===(perfmjs.currentDomain||"")&&(perfmjs.currentDomain=s.d);for(var o=s.m.split(";"),a=o.length,u=0;a>u;u++){var c=o[u];t.mdCallback.call(null,s,c,n)}perfmjs.includeres.loadedModuleName[s.n]=s.n}if(n=perfmjs.joquery.newInstance(t.handleUrlsCallback.call(null,n)||n).distinct(function(t){return t}).toArray(),n.length>=0)if("js"===t.type)n.length<1?t.afterLoadedCallback&&t.afterLoadedCallback():this.loadHeadRes(n.concat([t.afterLoadedCallback]));else if("css"===t.type)for(var l=n.length,f=0;l>f;f++)this.writecss(n[f],!1)}return this},sources:[],getVersion:function(t){t=t||2;var e=new Date,n=e.getDate()<=9?"0"+e.getDate():e.getDate(),r=e.getHours()<=9?"0"+e.getHours():e.getHours(),i=e.getMinutes()%2==0?e.getMinutes():e.getMinutes()-e.getMinutes()%t,s=9>=i?"0"+i:i;return""+e.getFullYear()+(e.getMonth()+1)+n+r+s},_parseLoadedRes:function(options){options=perfmjs.utils.extend({loadfile:"onlyforload.js|core.min.js|core.js|core-def.js",isScript:!1,src:""},options),this.sources.length=0;for(var scripts=options.isScript?document.getElementsByTagName("script"):options.src.split("|"),scriptLen=scripts.length,i=0;scriptLen>i;i++){var src=options.isScript?scripts[i].src:scripts[i].indexOf("^")<0?"onlyforload.js^"+scripts[i]:scripts[i],scriptOptions={},isParsed=options.isScript?src.isparsed||!1:!1;if(src&&src.match(options.loadfile)&&!isParsed&&-1!=src.indexOf("^")){for(var multiSrcOptions=src.split("^")[1].replace(new RegExp("%22","gm"),'"').replace(new RegExp("%27","gm"),"'").split("|"),multiSrcOptionsLen=multiSrcOptions.length,j=0;multiSrcOptionsLen>j;j++){srcOptions=multiSrcOptions[j];try{scriptOptions=eval("("+srcOptions+")")}catch(err){"object"==typeof JSON&&JSON.parse&&(scriptOptions=JSON.parse(srcOptions))}this.sources[this.sources.length]=scriptOptions}options.isScript&&scripts[i].setAttribute("isparsed","true")}}return this.sources}},perfmjs.utils.isAmdSupport()&&(define("perfmjs",function(){return perfmjs}),define("utils",function(){return perfmjs.utils}),define("joquery",function(){return perfmjs.joquery}),define("async",function(){return perfmjs.async}),define("base",function(){return perfmjs.base}),define("loader",function(){return perfmjs.includeres}),define("eventProxy",function(){return perfmjs.eventProxy.newInstance()}),define("fsm",function(){return perfmjs.fsm}),define("app",function(){return perfmjs.app.newInstance()})),perfmjs.includeres.load({isScript:!0})}(window),perfmjs.plugin("eventProxy",function(t){t.base("eventProxy",{init:function(){return this.channels={},this},on:function(t,e,n){var r,i,s,o,a,u;if(null==n&&(n=this),null==this.channels[t]&&(this.channels[t]=[]),s=this,t instanceof Array){for(u=[],o=0,a=t.length;a>o;o++)r=t[o],u.push(this.subscribe(r,e,n));return u}return i={context:n,callback:e},{attach:function(){return s.channels[t].push(i),this},detach:function(){return Mediator._rm(s,t,i.callback),this}}.attach()},off:function(t,e){var n;switch(typeof t){case"string":"function"==typeof e&&Mediator._rm(this,t,e),"undefined"==typeof e&&Mediator._rm(this,t);break;case"function":for(n in this.channels)Mediator._rm(this,n,t);break;case"undefined":for(n in this.channels)Mediator._rm(this,n);break;case"object":for(n in this.channels)Mediator._rm(this,n,null,t)}return this},emit:function(t,e,n){var r,i,s,o,a,u,c;if(null!=this.channels[t])for(c=this.channels[t],a=0,u=c.length;u>a;a++)if(s=c[a],n!==!0&&"object"==typeof e){if(e instanceof Array)r=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],r.push(o);return r}();else{r={};for(i in e)o=e[i],r[i]=o}s.callback.apply(s.context,[r,t])}else s.callback.apply(s.context,[e,t]);return this},end:0}),t.eventProxy.defaults={scope:"singleton",end:0}}),perfmjs.plugin("fsm",function(t){t.base("fsm",{init:function(){return this.options.initial&&(this.option("current",this.options.initial.from),this.options.stateMap[this.options.initial.event]={},this.options.stateMap[this.options.initial.event][this.options.current]=this.options.initial.to,this.options.initial.defer||this.event(this.options.initial.event)),this},event:function(t){this.transition(t)},transition:function(t){var e=!1,n=this.options.current;e=this["onEnterFrom"+this.upperCaseFirst(this.options.current)]?this["onEnterFrom"+this.upperCaseFirst(this.options.current)](t):this.onEnterEvent(t),("undefined"==typeof e||e)&&(e=this["onLeaveFrom"+this.upperCaseFirst(this.options.current)]?this["onLeaveFrom"+this.upperCaseFirst(this.options.current)](t):this.onLeaveCurrentState(t),("undefined"==typeof e||e)&&this.options.stateMap[t][n]===this.options.current&&(e=this["onEnterTo"+this.upperCaseFirst(this.options.current)]?this["onEnterTo"+this.upperCaseFirst(this.options.current)](t):this.onEnterNewState(t),("undefined"==typeof e||e)&&(this["onLeaveTo"+this.upperCaseFirst(this.options.current)]?this["onLeaveTo"+this.upperCaseFirst(this.options.current)](t):this.onLeaveEvent(t))))},current:function(){return this.options.current},is:function(t){return this.options.current===t},can:function(t){return this.options.stateMap[t].hasOwnProperty(this.options.current)||this.options.stateMap[t].hasOwnProperty(this.options.WILDCARD)},cannot:function(t){return!this.can(t)},isFinished:function(){return this.is(this.options.terminal)},upperCaseFirst:function(t){return t.substring(0,1).toUpperCase()+t.substring(1)},onEnterEvent:function(){},onLeaveCurrentState:function(t){this.option("current",this.options.stateMap[t][this.options.current]||this.options.current)},onEnterNewState:function(){},onLeaveEvent:function(){},end:0}),t.fsm.defaults={initial:{event:"startup",from:"init",to:"final",defer:!1},stateMap:{},current:"init",terminal:"final",WILDCARD:"*",version:"1.0.0",scope:"singleton",end:0}}),perfmjs.plugin("app",function(t){t.base("app",{init:function(){return this.moduleData={},this.eventProxy=t.eventProxy.newInstance(),this},register:function(t,e,n){null==n&&(n={});try{return this._addModule(t,e,n),n.init?this.start(t):t}catch(r){if(DEBUG_MOD)throw r;return perfmjs.logger.error("could not register "+t+" because: "+r.message),void 0}},registerAndStart:function(t,e,n){return this.start(this.register(t,e,n))},unregister:function(t){return null!=this.moduleData[t]?(delete this.moduleData[t],!0):!1},start:function(t){if(!t)return!1;try{if(null==this.moduleData[t])throw new Error("module "+t+" does not exist");var e=this.moduleData[t].options;null==e&&(e={});var n=this._createInstance(t,e);if(n.running===!0)throw new Error("module "+t+" was already started");if("function"!=typeof n.init)throw new Error("module "+t+" do not have an init function");return n.option(n.options),n.running=!0,this.moduleData[t].instance=n,"function"==typeof e.callback&&e.callback(),!0}catch(r){if(DEBUG_MOD)throw r;return perfmjs.logger.error(t+" init Error: "+r.message),!1}},startAll:function(){var e,n=[];for(e in this.moduleData)this.moduleData.hasOwnProperty(e)&&n.push(this.start(e));return this.eventProxy.emit(t.sysconfig.events.moduleIsReady),n},stop:function(e){var n=this.moduleData[e];return n.instance?(t.utils.isFunction(n.instance.destroy)&&n.instance.destroy(),n.instance.running=!1,n.instance=null,!0):!1},stopAll:function(){var t,e;e=[];for(t in this.moduleData)this.moduleData.hasOwnProperty(t)&&e.push(this.stop(t));return e},restart:function(t){return this.stop(t)?this.start(t):!1},_addModule:function(t,e,n){if("string"!=typeof t)throw new Error("moudule ID has to be a string");var r=e;if("string"==typeof e&&(e=this._parseFunction(e)),"function"!=typeof e)throw new Error(e+" creator "+r+" has to be a constructor function");if("object"!=typeof n)throw new Error("option parameter has to be an object");if(null!=this.moduleData[t])throw new Error("module was already registered");return this.moduleData[t]={creator:e,options:n},!0},_createInstance:function(e,n){var r=this.moduleData[e];
return null!=r.instance?r.instance:r.creator.newInstance(t.eventProxy.newInstance(),n)},_parseFunction:function(e){for(var n=e.split("."),r=n.length,i=window,s=t.utils.isWindow(n[0])?1:0;r>s;s++){if(!t.utils.isFunction(i[n[s]])&&!t.utils.isPlainObject(i[n[s]]))return null;i=i[n[s]]}return t.utils.isFunction(i)?i:null},end:0}),t.app.defaults={scope:"singleton",end:0}});