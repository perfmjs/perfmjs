!function(global){"use strict";var _namespace=function(){for(var t,e,n,i,r=arguments,s=0;s<r.length;s++)if(t=window,i=r[s],0!==i.indexOf("perfmjs")&&(i="perfmjs."+i),i.indexOf("."))for(n=i.split("."),e="window"===n[0]?1:0;e<n.length;e++)t[n[e]]=t[n[e]]||{},t=t[n[e]];else t[i]=t[i]||{}};_namespace("perfmjs"),perfmjs.currentDomain="",perfmjs.utils={VERSION:"2.1.0",namespace:_namespace,getGlobal:function(t){if(!t)return global;var e=global;return this.forEach(t.split("."),function(t){e=e[t]}),e},isBrowserSupport:function(){return!this.isNodeJSSupport()},isNodeJSSupport:function(){return"undefined"!=typeof module&&module.exports?!0:!1},isAmdSupport:function(){return"function"==typeof define&&define.amd&&define.amd.async},isH5Support:function(){return"__proto__"in{}},isObject:function(t){return t===Object(t)},keys:function(t){if(!this.isObject(t))return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&(e[e.length]=n);return e},_fastBind:function(t,e){var n,i=arguments.length-2;if(i>0){n=new Array(i);for(var r=0;i>r;r++)n[r]=arguments[r+2];return function(){var r,s=arguments.length,o=new Array(i+s);for(r=0;i>r;r++)o[r]=n[r];for(r=0;s>r;r++)o[i+r]=arguments[r];return t.apply(e,o)}}return function(){var n,i=arguments.length,r=new Array(i);for(n=0;i>n;n++)r[n]=arguments[n];return t.apply(e,r)}},forEach:function(t,e,n){var i,r=t.length,s=arguments.length>2?this._fastBind(e,n):e;for(i=0;r>i;i++)s(t[i],i,t)},fastMap:function(t,e,n){var i,r=t.length,s=new Array(r),o=arguments.length>2?this._fastBind(e,n):e;for(i=0;r>i;i++)s[i]=o(t[i],i,t);return s},fastReduce:function(t,e,n,i){var r,s=t.length,o=n,a=arguments.length>3?this._fastBind(e,i):e;for(r=0;s>r;r++)o=a(o,t[r],r,t);return o},toNumber:function(t){return~~t},toBoolean:function(t){return!!t},_class2type:void 0,type:function(t){if(void 0===this._class2type){var e=this._class2type={};this.forEach("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,n){e["[object "+t+"]"]=t.toLowerCase()})}return null==t?String(t):this._class2type[Object.prototype.toString.call(t)]||"object"},isString:function(t){return"string"==typeof t},isFunction:function(t){return"function"===this.type(t)},isArray:Array.isArray||function(t){return"array"===this.type(t)},isWindow:function(t){return null!=t&&t==t.window},_isPlainObject:function(t){var e=Object.prototype.hasOwnProperty;if(!t||"object"!==this.type(t)||t.nodeType||this.isWindow(t))return!1;try{if(t.constructor&&!e.call(t,"constructor")&&!e.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in t);return void 0===i||e.call(t,i)},extend:function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},a=2),"object"==typeof o||this.isFunction(o)||(o={}),u===a&&(o=this,--a);u>a;a++)if(null!=(t=arguments[a]))for(e in t)n=o[e],i=t[e],o!==i&&(c&&i&&(this._isPlainObject(i)||(r=this.isArray(i)))?(r?(r=!1,s=n&&this.isArray(n)?n:[]):s=n&&this._isPlainObject(n)?n:{},o[e]=this.extend(c,s,i)):void 0!==i&&(o[e]=i));return o},trim:String.prototype.trim&&!String.prototype.trim.call("\ufeff ")?function(t){return null==t?"":String.prototype.trim.call(t)}:function(t){return null==t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},now:function(){return(new Date).getTime()},error:function(t){throw new Error(t)},parseJSON:function(t){return t&&"string"==typeof t?(t=this.trim(t),window.JSON&&window.JSON.parse?window.JSON.parse(t):/^[\],:{}\s]*$/.test(t.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+t)():void this.error("Invalid JSON: "+t)):null},debugJSON:function(t){return"object"==typeof JSON&&JSON.stringify?JSON.stringify(t):"null"},merge:function(t,e){var n=e.length,i=t.length,r=0;if("number"==typeof n)for(;n>r;r++)t[i++]=e[r];else for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t},fmtJSONMsg:function(jsonData){var result,jsonMessage={status:"fail",code:"0",msg:"",result:{}};try{result="string"==typeof jsonData?"object"==typeof JSON&&JSON.parse?JSON.parse(jsonData):eval("("+jsonData+")"):jsonData,void 0!=result&&void 0==result.status?(jsonMessage.status="success",jsonMessage.code="0",jsonMessage.msg="",jsonMessage.result=result):void 0!=result&&(jsonMessage=result)}catch(err){jsonMessage={status:"fail",code:"0",msg:"服务器响应失败，请稍后重试或联系我们的客服！",result:{}}}return jsonMessage||{status:"fail",code:"0",msg:"",result:{}}},aop:function(t,e,n,i){var r=this,s=function(){var s,o;return t=t||this,n&&"function"==typeof n&&(s=n.apply(t,arguments),"undefined"!=typeof s)?s:(s=r.isArray(s)?s:arguments,o=e.apply(t,s),i&&"function"==typeof i&&(Array.prototype.unshift.call(s,o),o=i.apply(t,s)||o),o)};return s},nextTick:"undefined"!=typeof module&&module.exports?function(t,e){process.nextTick(function(){t(e)})}:function(t,e){setTimeout(function(){t(e)},0)},end:0},perfmjs.plugin=function(t,e){var n=perfmjs.utils.isString(t)?t:t.name;if(e=perfmjs.utils.isFunction(t)?t:e,!perfmjs.utils.isFunction(e))throw"Plugin fn required!";if(perfmjs.plugins||(perfmjs.plugins={}),perfmjs.plugins[n])throw"Plugin name ["+n+" ] already exists!";n&&e&&(perfmjs.plugins[n]=e),e(perfmjs)},perfmjs.ready=function(t){perfmjs.utils.isFunction(t)&&perfmjs.loadRes.ready(document,function(){t(perfmjs,perfmjs.app.newInstance())})}}(this),perfmjs.plugin("sysConfig",function(t){t.utils.namespace("sysConfig"),t.sysConfig.events={moduleIsReady:"perfmjs.ready",end:0}}),!function(t){t=t||window,t.base=function(e,n,i,r){e.indexOf("base.")<0&&(e="base."+e);var s=e.split(".").slice(0,e.split(".").length-1).join(".");e=e.split(".")[e.split(".").length-1];for(var o=s.split(".").length,a=s.split("."),u=0;o>u;u++)t[s]=1>u?t[a[0]]:t[s][a[u]],r=t.utils.extend({},r,t[s].defaults),i=t.utils.extend(!0,{},i,t[s].prototype);if(t[s]=t[s]||{},t[e])throw new Error("base module ["+e+"] already exists!");t[e]=t.base[e]=t[s][e]=function(n,i){n=void 0===n?!0:n,this.options=t.utils.extend({},r,t[s][e].defaults,i),n&&this.init(),this.options.scope||(this.options.scope="singleton"),"singleton"===this.options.scope&&(t[e].instance=this)},t[s][e].getName=function(){return e},t[s][e].newInstance=function(n,i){if(t[e].instance)return t[e].instance;var r=new t[s][e](!1,i);return r.init(n),r},t[s][e].prototype=t.utils.extend(!0,{},i,n),t[s][e].prototype._super=function(t,e){return i[t].call(this,e)}},t.base.prototype={init:function(t){return this},option:function(t,e){return"string"==typeof t?"undefined"==typeof e?this.options[t]:this.options[t]=e:void 0}},t.base.defaults={scope:"singleton",end:0}}(perfmjs),perfmjs.plugin("joquery",function(t){t.base("joquery",{init:function(){return void 0===arguments?this:(this.items=arguments[0].slice(),this)},toArray:function(){return this.items},where:function(e,n){for(var i=new Array,r=0;r<this.items.length&&(!e(this.items[r],r)||(i[i.length]=this.items[r],!n));r++);return t.joquery.newInstance(i)},select:function(e){for(var n=new Array,i=0;i<this.items.length;i++)e(this.items[i])&&(n[n.length]=this.items[i]);return t.joquery.newInstance(n)},orderBy:function(e){return t.joquery.newInstance(this.items.slice().sort(function(t,n){var i=e(t),r=e(n);return r>i?-1:i>r?1:0}))},orderByDesc:function(e){return t.joquery.newInstance(this.items.slice().sort(function(t,n){var i=e(n),r=e(t);return r>i?-1:i>r?1:0}))},selectMany:function(e){for(var n=new Array,i=0;i<this.items.length;i++)n=n.concat(e(this.items[i]));return t.joquery.newInstance(n)},count:function(t){return null==t?this.items.length:this.where(t).items.length},distinct:function(e){for(var n,i={},r=[],s=0;s<this.items.length;s++)n=e(this.items[s]),i[n]||(i[n]=!0,r[r.length]=this.items[s]);return i=null,t.joquery.newInstance(r)},any:function(t){for(var e={matched:!1,index:-1,item:{}},n=0;n<this.items.length;n++)if(t(this.items[n],n))return{matched:!0,index:n,item:this.items[n]};return e},all:function(t){for(var e=0;e<this.items.length;e++)if(!t(this.items[e],e))return!1;return!0},reverse:function(){for(var e=new Array,n=this.items.length-1;n>-1;n--)e[e.length]=this.items[n];return t.joquery.newInstance(e)},first:function(t){return null!=t?this.where(t,!0).first():this.items.length>0?this.items[0]:null},last:function(t){return null!=t?this.reverse().first(t):this.items.length>0?this.items[this.items.length-1]:null},elementAt:function(t){return this.items[t]},concatArray:function(e){var n=e.items||e;return t.joquery.newInstance(this.items.concat(n))},intersect:function(e,n){var i;i=void 0!=n?n:function(t,e,n,i){return t==n};for(var r=e.items||e,s=new Array,o=0;o<this.items.length;o++)for(var a=0;a<r.length;a++)i(this.items[o],o,r[a],a)&&(s[s.length]=this.items[o]);return t.joquery.newInstance(s)},defaultIfEmpty:function(t){return 0==this.items.length?t:this},elementAtOrDefault:function(t,e){return t>=0&&t<this.items.length?this.items[t]:e},firstOrDefault:function(t){return this.first()||t},lastOrDefault:function(t){return this.last()||t},insert:function(t,e){var n={matched:!1,index:-1,item:{}};if(this.items.length<1)return this.items.splice(0,0,t),{matched:!0,index:0,item:t};for(var i=0;i<this.items.length;i++)if(e(this.items[i],i))return this.items.splice(i,0,t),{matched:!0,index:i,item:t};return n.matched?n:(this.items[this.items.length]=t,{matched:!0,index:this.items.length-1,item:t})},updateOrInsert:function(t,e,n){var i={matched:!1,index:-1,item:{}};if(this.items.length<1)return this.items.splice(0,0,t),{matched:!0,index:0,item:t};for(var r=0;r<this.items.length;r++){if(void 0!=e&&e(this.items[r],r))return this.items[r]=t,{matched:!0,index:r,item:t};if(n(this.items[r],r))return this.items.splice(r,0,t),{matched:!0,index:r,item:t}}return i.matched?i:(this.items[this.items.length]=t,{matched:!0,index:this.items.length-1,item:t})}}),t.joquery.defaults={scope:"prototype",end:0}}),perfmjs.plugin("appConfig",function(t){t.base("appConfig",{init:function(e){return this.extendConfig(t.globalConfig),t.utils.extend(this.options["amd.shim"],this.options["amd.app.shim"]),t.utils.extend(this.options["amd.modules"],this.options["amd.app.modules"]),t.utils.isAmdSupport()&&(define.config.baseUrl=this.options["amd.baseUrl"]),this},extendConfig:function(e){e&&!this.option("globalConfigLoaded")&&(this.option("globalConfigLoaded",!0),t.utils.extend(this.options,e))},end:0}),t.appConfig.defaults={globalConfigLoaded:!1,"amd.baseUrl":"/perfmjs/","amd.modules":{jquery:{alias:"lib/third-part-libs/jquery/jquery-1.11.1.min",css:[],js:[]},end:0},"amd.shim":{},"amd.app.modules":{},"amd.app.shim":{},end:0}}),perfmjs.plugin("async",function(t){!function(e){"use strict";t.utils.isNodeJSSupport()?e(exports):t.utils.isAmdSupport()?define("async",function(){return e()}):t.utils.isBrowserSupport()&&(t.async=e())}(function(e){"use strict";var n=function(){},i=function(){},r=function(e,n){var s=null;if(e.promise===n)return e.reject(new TypeError("Cannot resolve a promise with itself"));if(n instanceof i)return"fulfilled"===n.state?e.fulfill(n.result):"rejected"===n.state?e.reject(n.result):n.then(e.fulfill,e.reject);try{if(!t.utils.isObject(n)&&!t.utils.isFunction(n)||!t.utils.isFunction(s=n.then))return e.fulfill(n)}catch(o){e.reject(o)}s(function(t){r(e,t)},function(t){e.reject(t)})},s=function(t,e){return function(n){try{r(e,t(n))}catch(i){e.reject(i)}}},o=function(){var e,a="pending",u=[],c=[],l=new i,f=null,p=function(n,i){if("rejected"!==a){t.utils.isFunction(n)||(n=function(t){return t});var r=s(n,i);"fulfilled"===a?t.utils.nextTick(r,e):u.push(r)}},d=function(n,i){if("fulfilled"!==a){t.utils.isFunction(n)||(n=function(t){throw t});var r=s(n,i);"rejected"===a?t.utils.nextTick(r,e):c.push(r)}},h=function(t){if("pending"===a){a="fulfilled";for(var n=0,i=u.length;i>n;++n)u[n](t);return u=[],e=t,l}},m=function(t){if("pending"===a){a="rejected";for(var n=0,i=c.length;i>n;++n)c[n](t);return c=[],e=t,l}};return l.then=function(t,e){var n=o();return p(t,n),d(e,n),n.promise},l.state=a,l.result=e,n.prototype=l,f=new n,f.promise=l,f.fulfill=h,f.reject=m,f.resolve=function(t){r(this,t)},f};return e=e||{},e.defer=o,e.version="1.0.0",e})}),perfmjs.plugin("amd",function(t){var e={},n=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,i=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,r={},s={},o="loader",a={},u={require:{id:"require",getInstance:function(){return function(t){if("string"==typeof t){if(u[t])return u[t].getInstance(t);throw new Error(t+" has not been defined. Please include it as a dependency in define()")}}}},exports:{id:"exports",getInstance:function(e){return u[e]||t.utils.getGlobal()}},module:{id:"module",getInstance:function(){return function(t){return{id:t,uri:a.toUrl(t)}}}}};define=function(t,r,o){var a=arguments.length;1===a?(o=t,r=void 0,t=void 0):2===a&&("[object Array]"==={}.toString.call(t)?(o=r,r=t,t=void 0):(o=r,r=void 0)),r||"function"!=typeof o||(r=[],o.length&&(o.toString().replace(n,"").replace(i,function(t,e){r.push(e)}),r=(1===o.length?["require"]:["require","exports","module"]).concat(r))),!t&&e[r.join("-")]&&(t=e[r.join("-")]),t&&!s[t]&&(s[t]={id:t,deps:r||[],callback:o})},require=function(e,n,i){var r=[],c=t.async.defer();"string"!=typeof e&&(o.indexOf(e)<0&&a.handleAnonymousDefineId(),a.loadParsedRequireStack(e,[],0,c),c.promise.then(function(o){a.getDepsStack(e,r),r=t.joquery.newInstance(r).orderBy(function(e){var n=s[e].deps||[],i=0;return t.utils.forEach(n,function(t,e){"require"!==t&&"exports"!==t&&"module"!==t&&i++}),i}).toArray();for(var l=0;l<r.length;l++){var f=r[l];u[f]||(u[f]={id:f,getInstance:function(e){try{var n=[],i=s[e].deps;if(t.utils.toBoolean(u[e].instance))return u[e].instance;for(var r=0;r<i.length;r++)(u[i[r]]||{}).getInstance&&(n[n.length]=(u[i[r]]||{}).getInstance(i[r]));return u[e].instance=s[e].callback.apply(null,n),"undefined"==typeof u[e].instance&&(u[e].instance={}),u[e].instance}catch(o){c.reject(o.message)}}})}for(var p=[],d=0;d<e.length;d++)switch(e[d]){case"require":p[d]=u.require.getInstance();break;case"exports":p[d]=u.exports.getInstance(i);break;case"module":p[d]=u.module.getInstance()(i);break;case u[i]?u[i].id:"":p[d]=u[i].getInstance();break;default:p[d]=u[e[d]].getInstance(e[d])}n&&n.apply(null,p)},function(t){throw new Error("Error Occurred in require promise1:"+t.message)}).then(function(t){},function(e){throw t.utils.isH5Support()&&console.log("Error Occurred in require promise2:"+e.message),new Error("Error Occurred in require promise2:"+e.message)}))},define.config={baseUrl:"/perfmjs/lib/amd/"},define.amd={async:!0,jQuery:!0},a.getDepsStack=function(t,e,n){n=n||{},"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];if("require"!==r&&"exports"!==r&&"module"!==r&&s[r]){if(n[r])continue;n[r]=!0,e[e.length]=r;for(var o=s[r].deps||[],u=0;u<o.length;u++)a.getDepsStack(o[u],e,n)}}},a.loadParsedRequireStack=function(e,n,i,r){var o=[];n=n||[],a.parseRequireStack(e,n);for(var u=0;u<n.length;u++){var c=n[u],l="",f=t.appConfig.newInstance();f.option("amd.baseUrl")&&f.option("amd.modules")&&f.option("amd.modules")[c]&&(t.utils.forEach(["css","js"],function(e){f.option("amd.modules")[c][e]&&f.option("amd.modules")[c][e].length>0&&t.utils.forEach(f.option("amd.modules")[c][e],function(t){t.indexOf("http://")<0&&t.indexOf("https://")<0&&(t=define.config.baseUrl+t),o[o.length]=t})}),t.utils.toBoolean(f.option("amd.modules")[c].alias)&&(a.handleShim(c),l=f.option("amd.modules")[c].version||"",c=f.option("amd.modules")[c].alias)),o[o.length]=t.utils.toBoolean(l)?a.toUrl(c)+"?v="+l:a.toUrl(c)}1>i&&o.length<1&&r.resolve(e),o.length>0&&(i+=o.length,t.includeRes.loadHeadRes(o,function(){i-=o.length;for(var t=[],e=0;e<n.length;e++)t=t.concat(s[n[e]].deps);a.loadParsedRequireStack(t,[],i,r)}))},a.parseRequireStack=function(t,e){"string"==typeof t&&(t=[t]),e=e||[];for(var n=0;n<t.length;n++){var i=t[n];if(!s[i]||!r[i])switch(r[i]=!0,i){case"require":break;case"exports":break;case"module":break;default:s[i]?s[i].deps&&s[i].deps.length>0&&a.parseRequireStack(s[i].deps,e):e.splice(e.length,0,i)}}},a.toUrl=function(t,e){var n,i,r;if(t.indexOf("http://")>=0||t.indexOf("https://")>=0)return t;switch(t){case"require":case"exports":case"module":return t}for(n=(e||define.config.baseUrl).split("/"),n.pop(),t=t.split("/"),i=t.length;--i;)switch(t[0]){case"..":n.pop();case".":case"":t.shift(),r=!0}return n.join("/")+"/"+t.join("/")+".js"},a.handleAnonymousDefineId=function(){var n=t.appConfig.newInstance();this._done||(t.utils.forEach(t.utils.keys(n.option("amd.shim")),function(t){var i=n.option("amd.shim")[t].anonymousDefineId;i&&!e[t]&&(e[i]=t)}),this._done=1)},a.handleShim=function(e){var n=t.appConfig.newInstance();if(n.option("amd.shim")[e]){var i=n.option("amd.shim")[e].deps,r=n.option("amd.shim")[e].init,s=n.option("amd.shim")[e].exports;(s||r)&&define(e,i,r||s&&function(){return t.utils.getGlobal(s)})}}}),!function(t){DEBUG_MOD=!1,perfmjs.logger=function(){},perfmjs.logger.level=4,perfmjs.logger.setLevel=function(t){perfmjs.logger.level=t};var e=!1;perfmjs.utils.extend(perfmjs.logger.prototype,{level:perfmjs.logger.level,setEnableLevel:function(t){(t>4||0>t)&&this.error(["wrong level setting. level should be 0-4, the int type,you set ",t,", so stupided."].join("")),this.level=parseInt(t)},enabled:function(t){return t>perfmjs.logger.level?!1:!0},name:function(){return this._name},log:function(){this._log(4,arguments)},debug:function(){this._log(3,arguments)},info:function(){this._log(2,arguments)},warn:function(){this._log(1,arguments)},error:function(){this._log(0,arguments)},_handler:function(t,e,n){return},_log:function(t,e){this.enabled(t)&&this._handler(t,this.name(),e)},_prepare:function(){perfmjs.utils.getJQuery()("#DEBUG").remove(),perfmjs.utils.getJQuery()(document.head).before('<div id="DEBUG" style="margin-top:10px;padding:8px;border:dashed 1px #FF7300;background-color:#EEE;color:#000;"><ol></ol></div>'),e=!0},end:0});var n={};perfmjs.logger=function(t){return n[t]||(n[t]=new perfmjs.logger(t),n[t]._name=t),n[t]}("perfmjs"),perfmjs.logger.setEnableLevel(DEBUG_MOD?4:2)}(window),!function(t,e){"use strict";function n(){}function i(t,e){if(t){"object"==typeof t&&(t=[].slice.call(t));for(var n=0,i=t.length;i>n;n++)e.call(t,t[n],n)}}function r(t,n){var i=Object.prototype.toString.call(n).slice(8,-1);return n!==e&&null!==n&&i===t}function s(t){return r("Function",t)}function o(t){return r("Array",t)}function a(t){var e=t.split("/"),n=e[e.length-1],i=n.indexOf("?");return-1!==i?n.substring(0,i):n}function u(t){t=t||n,t._done||(t(),t._done=1)}function c(t,e,i,r){var s="object"==typeof t?t:{test:t,success:e?o(e)?e:[e]:!1,failure:i?o(i)?i:[i]:!1,callback:r||n},a=!!s.test;return a&&s.success?(s.success.push(s.callback),A.load.apply(null,s.success)):!a&&s.failure?(s.failure.push(s.callback),A.load.apply(null,s.failure)):r(),A}function l(t){var e={};if("object"==typeof t)for(var n in t)t[n]&&(e={name:n,url:t[n]});else e={name:a(t),url:t};var i=D[e.name];return i&&i.url===e.url?i:(D[e.name]=e,e)}function f(t){t=t||D;for(var e in t)if(t.hasOwnProperty(e)&&t[e].state!==M)return!1;return!0}function p(t){t.state=q,i(t.onpreload,function(t){t.call()})}function d(t,n){t.state===e&&(t.state=I,t.onpreload=[],v({url:t.url,type:"cache"},function(){p(t)}))}function h(){var t=arguments,e=t[t.length-1],n=[].slice.call(t,1),r=n[0];return s(e)||(e=null),o(t[0])?(t[0].push(e),A.load.apply(null,t[0]),A):(r?(i(n,function(t){!s(t)&&t&&d(l(t))}),g(l(t[0]),s(r)?r:function(){A.load.apply(null,n)})):g(l(t[0])),A)}function m(){var t=arguments,e=t[t.length-1],n={};return s(e)||(e=null),o(t[0])?(t[0].push(e),A.load.apply(null,t[0]),A):(i(t,function(t,i){t!==e&&(t=l(t),n[t.name]=t)}),i(t,function(t,i){t!==e&&(t=l(t),g(t,function(){f(n)&&u(e)}))}),A)}function g(t,e){return e=e||n,t.state===M?void e():t.state===C?void A.ready(t.name,e):t.state===I?void t.onpreload.push(function(){g(t,e)}):(t.state=C,void v(t,function(){t.state=M,e(),i($[t.name],function(t){u(t)}),O&&f()&&i($.ALL,function(t){u(t)})}))}function y(t){t=t||"";var e=t.split("?")[0].split(".");return e[e.length-1].toLowerCase()}function v(e,i){function r(e){e=e||t.event,a.onload=a.onreadystatechange=a.onerror=null,i()}function s(n){n=n||t.event,("load"===n.type||/loaded|complete/.test(a.readyState)&&(!S.documentMode||S.documentMode<9))&&(t.clearTimeout(e.errorTimeout),t.clearTimeout(e.cssTimeout),a.onload=a.onreadystatechange=a.onerror=null,i())}function o(){if(e.state!==M&&e.cssRetries<=20){for(var n=0,i=S.styleSheets.length;i>n;n++)if(S.styleSheets[n].href===a.href)return void s({type:"load"});e.cssRetries++,e.cssTimeout=t.setTimeout(o,250)}}i=i||n;var a,u=y(e.url);"css"===u?(a=S.createElement("link"),a.type="text/"+(e.type||"css"),a.rel="stylesheet",a.href=e.url,e.cssRetries=0,e.cssTimeout=t.setTimeout(o,500)):(a=S.createElement("script"),a.type="text/"+(e.type||"javascript"),a.src=e.url),a.onload=a.onreadystatechange=s,a.onerror=r,a.async=!1,a.defer=!1,e.errorTimeout=t.setTimeout(function(){r({type:"timeout"})},7e3);var c=S.head||S.getElementsByTagName("head")[0];c.insertBefore(a,c.lastChild)}function j(){for(var t=S.getElementsByTagName("script"),e=0,n=t.length;n>e;e++){var i=t[e].getAttribute("data-headjs-load");if(i)return void A.load(i)}}function w(t,e){if(t===S)return O?u(e):E.push(e),A;if(s(t)&&(e=t,t="ALL"),o(t)){var n={};return i(t,function(t){n[t]=D[t],A.ready(t,function(){f(n)&&u(e)})}),A}if("string"!=typeof t||!s(e))return A;var r=D[t];if(r&&r.state===M||"ALL"===t&&f()&&O)return u(e),A;var a=$[t];return a?a.push(e):a=$[t]=[e],A}function b(){return S.body?void(O||(O=!0,j(),i(E,function(t){u(t)}))):(t.clearTimeout(A.readyTimeout),void(A.readyTimeout=t.setTimeout(b,50)))}function x(){S.addEventListener?(S.removeEventListener("DOMContentLoaded",x,!1),b()):"complete"===S.readyState&&(S.detachEvent("onreadystatechange",x),b())}var O,S=t.document,E=[],$={},D={},_=!0,k=t.head_conf&&t.head_conf.head||"head",A=t[k]=t[k]||function(){A.ready.apply(null,arguments)},I=1,q=2,C=3,M=4;if("complete"===S.readyState)b();else if(S.addEventListener)S.addEventListener("DOMContentLoaded",x,!1),t.addEventListener("load",b,!1);else{S.attachEvent("onreadystatechange",x),t.attachEvent("onload",b);var F=!1;try{F=!t.frameElement&&S.documentElement}catch(L){}F&&F.doScroll&&!function R(){if(!O){try{F.doScroll("left")}catch(e){return t.clearTimeout(A.readyTimeout),void(A.readyTimeout=t.setTimeout(R,50))}b()}}()}A.load=A.js=_?m:h,A.test=c,A.ready=w,A.ready(S,function(){f()&&i($.ALL,function(t){u(t)}),A.feature&&A.feature("domloaded",!0)}),perfmjs.utils.namespace("loadRes"),perfmjs.loadRes=A}(window),perfmjs.plugin("includeRes",function($$){if($$.utils.namespace("includeRes"),$$.includeRes={writejs:function(t,e){document.write('<script type="text/javascript" src='+t+' charset="'+(e||"UTF-8")+'"></script>')},writecss:function(t,e){if(e=e||!0){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}else document.write('<link type="text/css" rel="stylesheet" href="'+t+'" />')},loadHeadRes:function(){for(var t=arguments,e=[],n=0;n<t.length;n++)$$.utils.isArray(t[n])?e=e.concat(t[n]):e[e.length]=t[n];$$.loadRes.js.apply(null,e)},load:function(t){this._parseLoadedRes(t);for(var e=this.getVersion(),n=[],i=0;i<this.sources.length;i++){var r=this.sources[i];void 0!==r.f&&""!==r.f&&(n[n.length]=r.f+"?v="+e)}n=$$.joquery.newInstance(n).distinct(function(t){return t}).toArray();for(var s=0;s<n.length;s++)this.writejs(n[s]);return this},loadedModuleName:{},loadModules:function(t){if(t=$$.utils.extend({name:"",type:"js",mdCallback:function(){},handleUrlsCallback:function(){},afterLoadedCallback:function(){}},t),"undefined"!=typeof $$.includeRes.sources){var e=$$.includeRes.sources;if(e=$$.joquery.newInstance(e).select(function(e){return e.n===t.name&&e.t===t.type}).toArray(),e.length<1)return this;for(var n=[],i=0;i<e.length;i++)if(""===e[i].n||!$$.includeRes.loadedModuleName[e[i].n]){var r=e[i];void 0!==r.d&&""===($$.currentDomain||"")&&($$.currentDomain=r.d);for(var s=r.m.split(";"),o=0;o<s.length;o++){var a=s[o];$$.utils.trim(a).length>0&&t.mdCallback.call(null,r,a,n)}$$.includeRes.loadedModuleName[r.n]=r.n}if(n=$$.joquery.newInstance(t.handleUrlsCallback.call(null,n)||n).distinct(function(t){return t}).toArray(),n.length>=0)if("js"===t.type)n.length<1?t.afterLoadedCallback&&t.afterLoadedCallback():this.loadHeadRes(n.concat([t.afterLoadedCallback]));else if("css"===t.type)for(var u=n.length,c=0;u>c;c++)this.writecss(n[c],!1)}return this},sources:[],getVersion:function(t){t=t||2;var e=new Date,n=e.getDate()<=9?"0"+e.getDate():e.getDate(),i=e.getHours()<=9?"0"+e.getHours():e.getHours(),r=e.getMinutes()%2==0?e.getMinutes():e.getMinutes()-e.getMinutes()%t,s=9>=r?"0"+r:r;return""+e.getFullYear()+(e.getMonth()+1)+n+i+s},_parseLoadedRes:function(options){options=$$.utils.extend({loadfile:"core-[0-9]+.[0-9]+.[0-9]+.js|core-[0-9]+.[0-9]+.[0-9]+.min.js|onlyforload.js|core.min.js|core.js",isScript:!1,src:'{n:"",t:"js",m:"default;"}'},options),this.sources.length=0;for(var scripts=options.isScript?document.getElementsByTagName("script"):options.src.split("|"),i=0;i<scripts.length;i++){var src=options.isScript?scripts[i].src:scripts[i].indexOf("^")<0?"onlyforload.js^"+scripts[i]:scripts[i],scriptOptions={},isParsed=options.isScript?src.isparsed||!1:!1;if(src&&src.match(options.loadfile)&&!isParsed&&-1!=src.indexOf("^")){for(var multiSrcOptions=src.split("^")[1].replace(new RegExp("%20","gm")," ").replace(new RegExp("%22","gm"),'"').replace(new RegExp("%27","gm"),"'").split("|"),j=0;j<multiSrcOptions.length;j++){srcOptions=multiSrcOptions[j];try{scriptOptions=eval("("+srcOptions+")")}catch(err){"object"==typeof JSON&&JSON.parse&&(scriptOptions=JSON.parse(srcOptions))}scriptOptions=$$.utils.extend({n:"",t:"js",m:"default"},scriptOptions),this.sources[this.sources.length]=scriptOptions}options.isScript&&scripts[i].setAttribute("isparsed","true")}}return scripts.length>0&&this.sources.length<1&&(this.sources[this.sources.length]={n:"",t:"js",m:"default"}),this.sources}},$$.utils.isAmdSupport()){if("undefined"!=typeof jQuery){var cachedJq=jQuery;define("jquery",function(){return cachedJq})}define("perfmjs",function(){return $$}),define("utils",function(){return $$.utils}),define("joquery",function(){return $$.joquery}),define("async",function(){return $$.async}),define("base",function(){return $$.base}),define("loader",function(){return $$.includeRes}),define("eventProxy",function(){return $$.eventProxy.newInstance()}),define("fsm",function(){return $$.fsm}),define("app",function(){return $$.app.newInstance()})}$$.includeRes.load({isScript:!0})}),perfmjs.plugin("eventProxy",function(t){t.base("eventProxy",{init:function(){return this.channels={},this},on:function(t,e,n){var i,r,s,o,a,u;if(null==n&&(n=this),null==this.channels[t]&&(this.channels[t]=[]),s=this,t instanceof Array){for(u=[],o=0,a=t.length;a>o;o++)i=t[o],u.push(this.subscribe(i,e,n));return u}return r={context:n,callback:e},{attach:function(){return s.channels[t].push(r),this},detach:function(){return Mediator._rm(s,t,r.callback),this}}.attach()},off:function(t,e){var n;switch(typeof t){case"string":"function"==typeof e&&Mediator._rm(this,t,e),"undefined"==typeof e&&Mediator._rm(this,t);break;case"function":for(n in this.channels)Mediator._rm(this,n,t);break;case"undefined":for(n in this.channels)Mediator._rm(this,n);break;case"object":for(n in this.channels)Mediator._rm(this,n,null,t)}return this},emit:function(t,e,n){var i,r,s,o,a,u,c;if(null!=this.channels[t])for(c=this.channels[t],a=0,u=c.length;u>a;a++)if(s=c[a],n!==!0&&"object"==typeof e){if(e instanceof Array)i=function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)o=e[t],i.push(o);return i}();else{i={};for(r in e)o=e[r],i[r]=o}s.callback.apply(s.context,[i,t])}else s.callback.apply(s.context,[e,t]);return this},end:0}),t.eventProxy.defaults={scope:"singleton",end:0}}),perfmjs.plugin("fsm",function(t){t.base("fsm",{init:function(){return this.options.initial&&(this.option("current",this.options.initial.from),this.options.stateMap[this.options.initial.event]={},this.options.stateMap[this.options.initial.event][this.options.current]=this.options.initial.to,this.options.initial.defer||this.event(this.options.initial.event)),this},event:function(t){this.transition(t)},transition:function(t){var e=!1,n=this.options.current;e=this["onEnterFrom"+this.upperCaseFirst(this.options.current)]?this["onEnterFrom"+this.upperCaseFirst(this.options.current)](t):this.onEnterEvent(t),("undefined"==typeof e||e)&&(e=this["onLeaveFrom"+this.upperCaseFirst(this.options.current)]?this["onLeaveFrom"+this.upperCaseFirst(this.options.current)](t):this.onLeaveCurrentState(t),("undefined"==typeof e||e)&&this.options.stateMap[t][n]===this.options.current&&(e=this["onEnterTo"+this.upperCaseFirst(this.options.current)]?this["onEnterTo"+this.upperCaseFirst(this.options.current)](t):this.onEnterNewState(t),("undefined"==typeof e||e)&&(this["onLeaveTo"+this.upperCaseFirst(this.options.current)]?this["onLeaveTo"+this.upperCaseFirst(this.options.current)](t):this.onLeaveEvent(t))))},current:function(){return this.options.current},is:function(t){return this.options.current===t},can:function(t){return this.options.stateMap[t].hasOwnProperty(this.options.current)||this.options.stateMap[t].hasOwnProperty(this.options.WILDCARD)},cannot:function(t){return!this.can(t)},isFinished:function(){return this.is(this.options.terminal)},upperCaseFirst:function(t){return t.substring(0,1).toUpperCase()+t.substring(1)},onEnterEvent:function(t){},onLeaveCurrentState:function(t){this.option("current",this.options.stateMap[t][this.options.current]||this.options.current)},onEnterNewState:function(t){},onLeaveEvent:function(t){},end:0}),t.fsm.defaults={initial:{event:"startup",from:"init",to:"final",defer:!1},stateMap:{},current:"init",terminal:"final",WILDCARD:"*",version:"1.0.0",scope:"singleton",end:0}}),perfmjs.plugin("app",function(t){t.base("app",{init:function(e){return this.moduleData={},this.eventProxy=t.eventProxy.newInstance(),this},register:function(t,e){try{var n=t.getName();return e=e||{},this._addModule(n,t,e),e.init?this.start(n):n}catch(i){if(DEBUG_MOD)throw i;return void perfmjs.logger.error("could not register "+n+" because: "+i.stack||i.message)}},registerAndStart:function(t,e){return this.start(this.register(t,e))},unregister:function(t){return null!=this.moduleData[t]?(delete this.moduleData[t],!0):!1},start:function(t){if(!t)return!1;try{if(null==this.moduleData[t])throw new Error("module "+t+" does not exist");var e=this.moduleData[t].options;null==e&&(e={});var n=this._createInstance(t,e);if(n.running===!0)throw new Error("module "+t+" was already started");if("function"!=typeof n.init)throw new Error("module "+t+" do not have an init function");return n.option(n.options),n.running=!0,this.moduleData[t].instance=n,"function"==typeof e.callback&&e.callback(),!0}catch(i){if(DEBUG_MOD)throw i;return perfmjs.logger.error(t+" init Error: "+i.stack||i.message),!1}},startAll:function(){var e,n=[];for(e in this.moduleData)this.moduleData.hasOwnProperty(e)&&n.push(this.start(e));return this.eventProxy.emit(t.sysConfig.events.moduleIsReady),n},stop:function(e){var n=this.moduleData[e];return n.instance?(t.utils.isFunction(n.instance.destroy)&&n.instance.destroy(),n.instance.running=!1,n.instance=null,!0):!1},stopAll:function(){var t,e;e=[];for(t in this.moduleData)this.moduleData.hasOwnProperty(t)&&e.push(this.stop(t));return e},restart:function(t){return this.stop(t)?this.start(t):!1},_addModule:function(t,e,n){if("string"!=typeof t)throw new Error("moudule ID has to be a string");var i=e;if("string"==typeof e&&(e=this._parseFunction(e)),"function"!=typeof e)throw new Error(e+" creator "+i+" has to be a constructor function");if("object"!=typeof n)throw new Error("option parameter has to be an object");if(null!=this.moduleData[t])throw new Error("module was already registered");

return this.moduleData[t]={creator:e,options:n},!0},_createInstance:function(e,n){var i=this.moduleData[e];return null!=i.instance?i.instance:i.creator.newInstance(t.eventProxy.newInstance(),n)},_parseFunction:function(e){for(var n=e.split("."),i=n.length,r=window,s=t.utils.isWindow(n[0])?1:0;i>s;s++){if(!t.utils.isFunction(r[n[s]])&&!t.utils.isPlainObject(r[n[s]]))return null;r=r[n[s]]}return t.utils.isFunction(r)?r:null},end:0}),t.app.defaults={scope:"singleton",end:0}});