!(function(){var _namespace=function(){var a=arguments,o,i=0,j,d,arg;for(;i<a.length;i++){o=window;arg=a[i];if(arg.indexOf(".")){d=arg.split(".");for(j=(d[0]=="window")?1:0;j<d.length;j++){o[d[j]]=o[d[j]]||{};o=o[d[j]]}}else{o[arg]=o[arg]||{}}}};_namespace("perfmjs.sysconfig","perfmjs.json","perfmjs.includeres","perfmjs.loadres","perfmjs.app","perfmjs.model");if(typeof module!=="undefined"&&module.exports){module.exports=perfmjs}perfmjs.currentDomain="";perfmjs.plugins={};perfmjs.utils={namespace:_namespace,isH5Supported:function(){return -[1,]},isJQueryLoaded:function(){return(typeof jQuery!=="undefined")},getJQuery:function(){return this.isJQueryLoaded()?jQuery:{}},isObject:function(obj){return obj===Object(obj)},keys:function(obj){if(!this.isObject(obj)){return[]}if(Object.keys){return Object.keys(obj)}var keys=[];for(var key in obj){if(obj.hasOwnProperty(key)){keys[keys.length]=key}}return keys},fastBind:function(fn,thisContext){var boundLength=arguments.length-2,boundArgs;if(boundLength>0){boundArgs=new Array(boundLength);for(var i=0;i<boundLength;i++){boundArgs[i]=arguments[i+2]}return function(){var length=arguments.length,args=new Array(boundLength+length),i;for(i=0;i<boundLength;i++){args[i]=boundArgs[i]}for(i=0;i<length;i++){args[boundLength+i]=arguments[i]}return fn.apply(thisContext,args)}}else{return function(){var length=arguments.length,args=new Array(length),i;for(i=0;i<length;i++){args[i]=arguments[i]}return fn.apply(thisContext,args)}}},forEach:function(subject,fn,thisContext){var length=subject.length,i,iterator=arguments.length>2?this.fastBind(fn,thisContext):fn;for(i=0;i<length;i++){iterator(subject[i],i,subject)}},fastMap:function(subject,fn,thisContext){var length=subject.length,result=new Array(length),i,iterator=arguments.length>2?this.fastBind(fn,thisContext):fn;for(i=0;i<length;i++){result[i]=iterator(subject[i],i,subject)}return result},fastReduce:function(subject,fn,initialValue,thisContext){var length=subject.length,result=initialValue,i,iterator=arguments.length>3?this.fastBind(fn,thisContext):fn;for(i=0;i<length;i++){result=iterator(result,subject[i],i,subject)}return result},toNumber:function(obj){return ~~obj},toBoolean:function(obj){return !!obj},_class2type:undefined,type:function(obj){if(this._class2type===undefined){var _class2type=this._class2type={};this.forEach("Boolean Number String Function Array Date RegExp Object".split(" "),function(item,index){_class2type["[object "+item+"]"]=item.toLowerCase()})}return obj==null?String(obj):this._class2type[Object.prototype.toString.call(obj)]||"object"},isString:function(obj){return typeof obj=="string"},isFunction:function(obj){return this.type(obj)==="function"},isArray:Array.isArray||function(obj){return this.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},_isPlainObject:function(obj){var core_hasOwn=Object.prototype.hasOwnProperty;if(!obj||this.type(obj)!=="object"||obj.nodeType||this.isWindow(obj)){return false}try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var key;for(key in obj){}return key===undefined||core_hasOwn.call(obj,key)},extend:function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!this.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(this._isPlainObject(copy)||(copyIsArray=this.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&this.isArray(src)?src:[]}else{clone=src&&this._isPlainObject(src)?src:{}}target[name]=this.extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target},trim:String.prototype.trim&&!String.prototype.trim.call("\uFEFF\xA0")?function(text){return text==null?"":String.prototype.trim.call(text)}:function(text){return text==null?"":(text+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},now:function(){return(new Date).getTime()},error:function(msg){throw new Error(msg)},parseJSON:function(data){if(!data||typeof data!=="string"){return null}data=this.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data)}if(/^[\],:{}\s]*$/.test(data.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return(new Function("return "+data))()}this.error("Invalid JSON: "+data)},debugJSON:function(o){if(typeof(JSON)=="object"&&JSON.stringify){return JSON.stringify(o)}return"null"},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},fmtJSONMsg:function(jsonData){var result,jsonMessage={status:"fail",code:"0",msg:"",result:{}};try{if(typeof jsonData==="string"){if(typeof(JSON)=="object"&&JSON.parse){result=JSON.parse(jsonData)}else{result=eval("("+jsonData+")")}}else{result=jsonData}if(result!=undefined&&result.status==undefined){jsonMessage.status="success";jsonMessage.code="0";jsonMessage.msg="";jsonMessage.result=result}else{if(result!=undefined){jsonMessage=result}}}catch(err){jsonMessage={status:"fail",code:"0",msg:"服务器响应失败，请稍后重试或联系我们的客服！",result:{}}}return jsonMessage||{status:"fail",code:"0",msg:"",result:{}}},aop:function(context,orig,before,after){var _self=this,aopFunc=function(){var args,result;context=context||this;if(before&&typeof before==="function"){args=before.apply(this,arguments);if(typeof args!=="undefined"){return args}}args=_self.isArray(args)?args:arguments;result=orig.apply(context,args);if(after&&typeof after==="function"){Array.prototype.unshift.call(args,result);result=after.apply(context,args)||result}return result};return aopFunc},end:0};perfmjs.plugin=function(meta,fn,runFnNow){var name=perfmjs.utils.isString(meta)?meta:meta.name;runFnNow=runFnNow||true;fn=perfmjs.utils.isFunction(meta)?meta:fn;if(!perfmjs.utils.isFunction(fn)){throw"Plugin fn required!"}if(perfmjs.plugins[name]){throw"Plugin name ["+name+" ] is existed!"}if(name&&fn){perfmjs.plugins[name]=fn}if(runFnNow){!fn(perfmjs)}};perfmjs.plugin.start=function(meta){if(!!perfmjs.plugins[meta]){perfmjs.plugins[meta](perfmjs)}};perfmjs.ready=function(callback){if(perfmjs.utils.isFunction(callback)){perfmjs.loadres.ready(document,function(){callback(perfmjs,perfmjs.app.newInstance())})}}})();perfmjs.plugin("sysconfig",function(a){a.sysconfig.events={moduleIsReady:"perfmjs.ready",end:0}});perfmjs.plugin("browser",function(a){a.browser={init:function(){this.browser=this._searchString(this._dataBrowser)||"An unknown browser";this.version=this._searchVersion(navigator.userAgent)||this._searchVersion(navigator.appVersion)||"an unknown version";this.os=this._searchString(this._dataOS)||"an unknown OS";this.ok=true},info:function(){if(this.ok===undefined){this.init()}return this.browser+" "+this.version+" "+this.os},msie:function(){if(this.ok===undefined){this.init()}return(this.browser==="Explorer")},_searchString:function(e){for(var b=0;b<e.length;b++){var c=e[b].string;var d=e[b].prop;this.version_searchString=e[b].versionSearch||e[b].identity;if(c){if(c.indexOf(e[b].subString)!=-1){return e[b].identity}}else{if(d){return e[b].identity}}}},_searchVersion:function(c){var b=c.indexOf(this.version_searchString);if(b==-1){return}return parseFloat(c.substring(b+this.version_searchString.length+1))},_dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],_dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]}});!(function(a){a=a||window;a.base=function(b,j,h,g){if(b.indexOf("base.")<0){b="base."+b}var c=b.split(".").slice(0,b.split(".").length-1).join(".");b=b.split(".")[b.split(".").length-1];var k,d=c.split(".").length,f=c.split(".");for(var e=0;e<d;e++){a[c]=(e<1)?a[f[0]]:a[c][f[e]];if(e===(d-1)){k=a[c]}}h=h||k.prototype||a.base.prototype;g=g||k.defaults||a.base.defaults;a[c]=a[c]||{};a[b]=a[c][b]=function(l,i){l=(l===undefined)?true:l;this.namespace=c;this.name=b;this.options=a.utils.extend({},g,a[c][b].defaults,i);(l&&this.init());if(!this.options.scope){this.options.scope="singleton"}if(this.options.scope==="singleton"){a[b]["instance"]=this}};a[c][b].newInstance=function(m,i){if(a[b]["instance"]){return a[b]["instance"]}var l=new a[c][b](false,i);l.init(m);return l};a[c][b].prototype=a.utils.extend(true,{},h,j);a[c][b].prototype._super=function(l,i){h[l].call(this,i)}};a.base.prototype={init:function(b){return this},option:function(b,c){if(typeof b==="string"&&this.options.hasOwnProperty(b)){if(typeof c==="undefined"){return this.options[b]}else{return this.options[b]=c}}}};a.base.defaults={scope:"singleton",end:0}})(perfmjs);!(function(b){DEBUG_MOD=false;perfmjs.logger=function(){};perfmjs.logger.level=4;perfmjs.logger.setLevel=function(e){perfmjs.logger.level=e};var d=false;var a=["error","warn","info","debug","log"];perfmjs.utils.extend(perfmjs.logger.prototype,{level:perfmjs.logger.level,setEnableLevel:function(e){if(e>4||e<0){this.error(["wrong level setting. level should be 0-4, the int type,you set ",e,", so stupided."].join(""))}this.level=parseInt(e)},enabled:function(e){if(e>perfmjs.logger.level){return false}return true},name:function(){return this._name},log:function(){this._log(4,arguments)},debug:function(){this._log(3,arguments)},info:function(){this._log(2,arguments)},warn:function(){this._log(1,arguments)},error:function(){this._log(0,arguments)},_handler:function(j,g,h){return;var i=a[j];h=[[i+"|"].join(" | ")].concat(Array.prototype.slice.call(h));if(self.console&&!perfmjs.browser.msie()){if(console.log.apply){console[i].apply(console,h)}else{console[console[i]?i:"log"](h)}}else{if(perfmjs.browser.msie()){if(/debug=true/i.test(location.search)){!d&&this._prepare();var e=perfmjs.utils.getJQuery()("#DEBUG ol");var f;switch(i){case"log":f="#FFFFFF";break;case"debug":f="#C0C0C0";break;case"info":f="#EBF5FF";break;case"warn":f="#FFFFC8";break;case"error":f="#FE6947";break;default:f="#FFFFFF";break}perfmjs.utils.getJQuery()('<li style="background-color:'+f+';">').text(""+h).appendTo(e)}}}},_log:function(f,e){if(this.enabled(f)){this._handler(f,this.name(),e)}},_getBrowserInfo:function(){return perfmjs.browser.info()},_prepare:function(){perfmjs.utils.getJQuery()("#DEBUG").remove();perfmjs.utils.getJQuery()(document.head).before('<div id="DEBUG" style="margin-top:10px;padding:8px;border:dashed 1px #FF7300;background-color:#EEE;color:#000;"><ol></ol></div>');d=true},end:0});var c={};perfmjs.logger=function(e){if(!c[e]){c[e]=new perfmjs.logger(e);c[e]._name=e}return c[e]}("perfmjs");if(DEBUG_MOD){perfmjs.logger.setEnableLevel(4)}else{perfmjs.logger.setEnableLevel(2)}})(window);perfmjs.plugin("joquery",function(a){a.base("joquery",{init:function(){if(arguments===undefined){return this}this.items=arguments[0].slice();return this},version:"1.0.0",toArray:function(){return this.items},where:function(e,c){var b=new Array();for(var d=0;d<this.items.length;d++){if(e(this.items[d],d)){b[b.length]=this.items[d];if(c){break}}}return new a.joquery(false).init(b)},select:function(d){var b=new Array();for(var c=0;c<this.items.length;c++){if(d(this.items[c])){b[b.length]=this.items[c]}}return new a.joquery(false).init(b)},orderBy:function(d){var c=new Array();for(var b=0;b<this.items.length;b++){c[c.length]=this.items[b]}return new a.joquery(false).init(c.sort(function(g,f){var e=d(g);var h=d(f);return((e<h)?-1:((e>h)?1:0))}))},orderByDescending:function(d){var c=new Array();for(var b=0;b<this.items.length;b++){c[c.length]=this.items[b]}return new a.joquery(false).init(c.sort(function(g,f){var e=d(f);var h=d(g);return((e<h)?-1:((e>h)?1:0))}))},selectMany:function(d){var c=new Array();for(var b=0;b<this.items.length;b++){c=c.concat(d(this.items[b]))}return new a.joquery(false).init(c)},count:function(b){if(b==null){return this.items.length}else{return this.where(b).items.length}},distinct:function(e){var c;var f=new Object();var d=new Array();for(var b=0;b<this.items.length;b++){c=e(this.items[b]);if(f[c]==null){f[c]=true;d[d.length]=c}}f=null;return new a.joquery(false).init(d)},any:function(d){var b={matched:false,index:-1,item:{}};for(var c=0;c<this.items.length;c++){if(d(this.items[c],c)){return{matched:true,index:c,item:this.items[c]}}}return b},all:function(c){for(var b=0;b<this.items.length;b++){if(!c(this.items[b],b)){return false}}return true},reverse:function(){var c=new Array();for(var b=this.items.length-1;b>-1;b--){c[c.length]=this.items[b]}return new a.joquery(false).init(c)},first:function(b){if(b!=null){return this.where(b,true).first()}else{if(this.items.length>0){return this.items[0]}else{return null}}},last:function(b){if(b!=null){return this.reverse().first(b)}else{if(this.items.length>0){return this.items[this.items.length-1]}else{return null}}},elementAt:function(b){return this.items[b]},concatArray:function(c){var b=c.items||c;return new a.joquery(false).init(this.items.concat(b))},intersect:function(g,i){var h;if(i!=undefined){h=i}else{h=function(k,j,b,l){return k==b}}var e=g.items||g;var d=new Array();for(var f=0;f<this.items.length;f++){for(var c=0;c<e.length;c++){if(h(this.items[f],f,e[c],c)){d[d.length]=this.items[f]}}}return new a.joquery(false).init(d)},defaultIfEmpty:function(b){if(this.items.length==0){return b}return this},elementAtOrDefault:function(c,b){if(c>=0&&c<this.items.length){return this.items[c]}return b},firstOrDefault:function(b){return this.first()||b},lastOrDefault:function(b){return this.last()||b},insert:function(d,e){var b={matched:false,index:-1,item:{}};if(this.items.length<1){this.items.splice(0,0,d);return{matched:true,index:0,item:d}}for(var c=0;c<this.items.length;c++){if(e(this.items[c],c)){this.items.splice(c,0,d);return{matched:true,index:c,item:d}}}if(!b.matched){this.items[this.items.length]=d;return{matched:true,index:this.items.length-1,item:d}}return b},updateOrInsert:function(e,f,d){var b={matched:false,index:-1,item:{}};if(this.items.length<1){this.items.splice(0,0,e);return{matched:true,index:0,item:e}}for(var c=0;c<this.items.length;c++){if(f!=undefined&&f(this.items[c],c)){this.items[c]=e;return{matched:true,index:c,item:e}}else{if(d(this.items[c],c)){this.items.splice(c,0,e);return{matched:true,index:c,item:e}}}}if(!b.matched){this.items[this.items.length]=e;return{matched:true,index:this.items.length-1,item:e}}return b}});a.joquery.defaults={scope:"prototype",end:0}});!function(H,t){var l=H.document,F=[],a={},b={},d="async" in l.createElement("script")||"MozAppearance" in l.documentElement.style||H.opera,E,f=H.head_conf&&H.head_conf.head||"head",j=H[f]=(H[f]||function(){j.ready.apply(null,arguments)}),x=1,J=2,z=3,r=4;function L(){}function I(e,P){if(!e){return}if(typeof e==="object"){e=[].slice.call(e)}for(var O=0,N=e.length;O<N;O++){P.call(e,e[O],O)}}function D(e,N){var O=Object.prototype.toString.call(N).slice(8,-1);return N!==t&&N!==null&&O===e}function u(e){return D("Function",e)}function C(e){return D("Array",e)}function m(O){var e=O.split("/"),N=e[e.length-1],P=N.indexOf("?");return P!==-1?N.substring(0,P):N}function q(e){e=e||L;if(e._done){return}e();e._done=1}function y(R,O,e,Q){var N=(typeof R==="object")?R:{test:R,success:!!O?C(O)?O:[O]:false,failure:!!e?C(e)?e:[e]:false,callback:Q||L};var P=!!N.test;if(P&&!!N.success){N.success.push(N.callback);j.load.apply(null,N.success)}else{if(!P&&!!N.failure){N.failure.push(N.callback);j.load.apply(null,N.failure)}else{Q()}}return j}function g(P){var N={};if(typeof P==="object"){for(var e in P){if(!!P[e]){N={name:e,url:P[e]}}}}else{N={name:m(P),url:P}}var O=b[N.name];if(O&&O.url===N.url){return O}b[N.name]=N;return N}function i(e){e=e||b;for(var N in e){if(e.hasOwnProperty(N)&&e[N].state!==r){return false}}return true}function c(e){e.state=J;I(e.onpreload,function(N){N.call()})}function h(e,N){if(e.state===t){e.state=x;e.onpreload=[];B({url:e.url,type:"cache"},function(){c(e)})}}function o(){var e=arguments,P=e[e.length-1],O=[].slice.call(e,1),N=O[0];if(!u(P)){P=null}if(C(e[0])){e[0].push(P);j.load.apply(null,e[0]);return j}if(!!N){I(O,function(Q){if(!u(Q)&&!!Q){h(g(Q))}});G(g(e[0]),u(N)?N:function(){j.load.apply(null,O)})}else{G(g(e[0]))}return j}function w(){var N=arguments,O=N[N.length-1],e={};if(!u(O)){O=null}if(C(N[0])){N[0].push(O);j.load.apply(null,N[0]);return j}I(N,function(Q,P){if(Q!==O){Q=g(Q);e[Q.name]=Q}});I(N,function(Q,P){if(Q!==O){Q=g(Q);G(Q,function(){if(i(e)){q(O)}})}});return j}function G(e,N){N=N||L;if(e.state===r){N();return}if(e.state===z){j.ready(e.name,N);return}if(e.state===x){e.onpreload.push(function(){G(e,N)});return}e.state=z;B(e,function(){e.state=r;N();I(a[e.name],function(O){q(O)});if(E&&i()){I(a.ALL,function(O){q(O)})}})}function A(N){N=N||"";var e=N.split("?")[0].split(".");return e[e.length-1].toLowerCase()}function B(P,T){T=T||L;function e(U){U=U||H.event;Q.onload=Q.onreadystatechange=Q.onerror=null;T()}function R(U){U=U||H.event;if(U.type==="load"||(/loaded|complete/.test(Q.readyState)&&(!l.documentMode||l.documentMode<9))){H.clearTimeout(P.errorTimeout);H.clearTimeout(P.cssTimeout);Q.onload=Q.onreadystatechange=Q.onerror=null;T()}}function S(){if(P.state!==r&&P.cssRetries<=20){for(var V=0,U=l.styleSheets.length;V<U;V++){if(l.styleSheets[V].href===Q.href){R({type:"load"});return}}P.cssRetries++;P.cssTimeout=H.setTimeout(S,250)}}var Q;var O=A(P.url);if(O==="css"){Q=l.createElement("link");Q.type="text/"+(P.type||"css");Q.rel="stylesheet";Q.href=P.url;P.cssRetries=0;P.cssTimeout=H.setTimeout(S,500)}else{Q=l.createElement("script");Q.type="text/"+(P.type||"javascript");Q.src=P.url}Q.onload=Q.onreadystatechange=R;Q.onerror=e;Q.async=false;Q.defer=false;P.errorTimeout=H.setTimeout(function(){e({type:"timeout"})},7000);var N=l.head||l.getElementsByTagName("head")[0];N.insertBefore(Q,N.lastChild)}function K(){var N=l.getElementsByTagName("script");for(var O=0,e=N.length;O<e;O++){var P=N[O].getAttribute("data-headjs-load");if(!!P){j.load(P);return}}}function k(O,Q){if(O===l){if(E){q(Q)}else{F.push(Q)}return j}if(u(O)){Q=O;O="ALL"}if(C(O)){var N={};I(O,function(R){N[R]=b[R];j.ready(R,function(){if(i(N)){q(Q)}})});return j}if(typeof O!=="string"||!u(Q)){return j}var P=b[O];if(P&&P.state===r||O==="ALL"&&i()&&E){q(Q);return j}var e=a[O];if(!e){e=a[O]=[Q]}else{e.push(Q)}return j}function s(){if(!l.body){H.clearTimeout(j.readyTimeout);j.readyTimeout=H.setTimeout(s,50);return}if(!E){E=true;K();I(F,function(e){q(e)})}}function v(){if(l.addEventListener){l.removeEventListener("DOMContentLoaded",v,false);s()}else{if(l.readyState==="complete"){l.detachEvent("onreadystatechange",v);s()}}}if(l.readyState==="complete"){s()}else{if(l.addEventListener){l.addEventListener("DOMContentLoaded",v,false);H.addEventListener("load",s,false)}else{l.attachEvent("onreadystatechange",v);H.attachEvent("onload",s);var n=false;try{n=!H.frameElement&&l.documentElement}catch(M){}if(n&&n.doScroll){(function p(){if(!E){try{n.doScroll("left")}catch(e){H.clearTimeout(j.readyTimeout);j.readyTimeout=H.setTimeout(p,50);return}s()}}())}}}j.load=j.js=d?w:o;j.test=y;j.ready=k;j.ready(l,function(){if(i()){I(a.ALL,function(e){q(e)})}if(j.feature){j.feature("domloaded",true)}});perfmjs.loadres=j}(window);!(function($$){perfmjs.includeres={writejs:function(src,encode){document.write('<script type="text/javascript" src='+src+' charset="'+(encode||"UTF-8")+'"><\/script>')},writecss:function(link,asyncCss){asyncCss=asyncCss||true;if(asyncCss){var cssNode=document.createElement("link");cssNode.type="text/css";cssNode.rel="stylesheet";cssNode.href=link;document.getElementsByTagName("head")[0].appendChild(cssNode)}else{document.write('<link type="text/css" rel="stylesheet" href="'+link+'" />')}},loadHeadRes:function(){var args=arguments,_args=[];for(var i=0;i<args.length;i++){if(perfmjs.utils.isArray(args[i])){_args=_args.concat(args[i]);continue}_args[_args.length]=args[i]}perfmjs.loadres.js.apply(null,_args)},load:function(options){this._parseLoadedRes(options);var len=this.sources.length,v=this.getVersion(),confs=[];for(var i=0;i<len;i++){var option=this.sources[i];if(option.f!=undefined&&option.f!=""){confs[confs.length]=option.f+"?v="+v}}confs=perfmjs.joquery.newInstance(confs).distinct(function(item){return item}).toArray();var confLen=confs.length;for(var j=0;j<confLen;j++){this.writejs(confs[j])}return this},loadedModuleName:{},loadModules:function(options){options=perfmjs.utils.extend({name:"js-comm",type:"js",mdCallback:function(){},handleUrlsCallback:function(){},afterLoadedCallback:function(){}},options);if(typeof perfmjs.includeres.sources!="undefined"){var sources=perfmjs.includeres.sources;sources=perfmjs.joquery.newInstance(sources).select(function(item){return(item.n===options.name&&item.t===options.type)}).toArray();if(sources.length<1){return this}var combineUrls=[];var modLen=sources.length;for(var i=0;i<modLen;i++){if(perfmjs.includeres.loadedModuleName[sources[i]["n"]]){continue}var source=sources[i];if(source.d!==undefined&&(perfmjs.currentDomain||"")===""){perfmjs.currentDomain=source.d}var modules=source.m.split(";");var moduleslen=modules.length;for(var j=0;j<moduleslen;j++){var module=modules[j];options.mdCallback.call(null,source,module,combineUrls)}perfmjs.includeres.loadedModuleName[source.n]=source.n}combineUrls=perfmjs.joquery.newInstance((options.handleUrlsCallback.call(null,combineUrls)||combineUrls)).distinct(function(item){return item}).toArray();if(combineUrls.length>0){if(options.type==="js"){this.loadHeadRes(combineUrls.concat([options.afterLoadedCallback]))}else{if(options.type==="css"){var combineUrlsLen=combineUrls.length;for(var r=0;r<combineUrlsLen;r++){this.writecss(combineUrls[r],false)}}}}}return this},sources:[],getVersion:function(interval){interval=interval||2;var load_date=new Date();var load_day=load_date.getDate()<=9?("0"+load_date.getDate()):load_date.getDate();var load_hour=load_date.getHours()<=9?("0"+load_date.getHours()):load_date.getHours();var _min=load_date.getMinutes()%2==0?load_date.getMinutes():(load_date.getMinutes()-load_date.getMinutes()%interval);var load_minute=_min<=9?("0"+_min):_min;return""+load_date.getFullYear()+(load_date.getMonth()+1)+load_day+load_hour+load_minute},_parseLoadedRes:function(options){options=perfmjs.utils.extend({loadfile:"onlyforload.js|core.min.js|core.js|core-def.js",isScript:false,src:""},options);this.sources.length=0;var scripts=options.isScript?document.getElementsByTagName("script"):options.src.split("|");var scriptLen=scripts.length;for(var i=0;i<scriptLen;i++){var src=options.isScript?scripts[i].src:(scripts[i].indexOf("^")<0?("onlyforload.js^"+scripts[i]):scripts[i]);var scriptOptions={};var isParsed=options.isScript?(src.isparsed||false):false;if(src&&src.match(options.loadfile)&&!isParsed){if(src.indexOf("^")!=-1){var multiSrcOptions=src.split("^")[1].replace(new RegExp("%22","gm"),'"').replace(new RegExp("%27","gm"),"'").split("|");var multiSrcOptionsLen=multiSrcOptions.length;for(var j=0;j<multiSrcOptionsLen;j++){srcOptions=multiSrcOptions[j];try{scriptOptions=eval("("+srcOptions+")")}catch(err){if(typeof(JSON)=="object"&&JSON.parse){scriptOptions=JSON.parse(srcOptions)}}this.sources[this.sources.length]=scriptOptions}if(options.isScript){scripts[i].setAttribute("isparsed","true")}}}}return this.sources}};perfmjs.includeres.load({isScript:true})})(window);perfmjs.plugin("eventProxy",function(a){a.base("eventProxy",{init:function(){this.channels={};return this},on:function(f,g,c){var b,k,j,e,h,d;if(c==null){c=this}if(this.channels[f]==null){this.channels[f]=[]}j=this;if(f instanceof Array){d=[];for(e=0,h=f.length;e<h;e++){b=f[e];d.push(this.subscribe(b,g,c))}return d}else{k={context:c,callback:g};return{attach:function(){j.channels[f].push(k);return this},detach:function(){Mediator._rm(j,f,k.callback);return this}}.attach()}},off:function(c,b){var d;switch(typeof c){case"string":if(typeof b==="function"){Mediator._rm(this,c,b)}if(typeof b==="undefined"){Mediator._rm(this,c)}break;case"function":for(d in this.channels){Mediator._rm(this,d,c)}break;case"undefined":for(d in this.channels){Mediator._rm(this,d)}break;case"object":for(d in this.channels){Mediator._rm(this,d,null,c)}}return this},emit:function(g,e,l){var b,c,m,j,f,h,d;if(this.channels[g]!=null){d=this.channels[g];for(f=0,h=d.length;f<h;f++){m=d[f];if(l!==true&&typeof e==="object"){if(e instanceof Array){b=(function(){var n,i,k;k=[];for(n=0,i=e.length;n<i;n++){j=e[n];k.push(j)}return k})()}else{b={};for(c in e){j=e[c];b[c]=j}}m.callback.apply(m.context,[b,g])}else{m.callback.apply(m.context,[e,g])}}}return this},end:0});a.eventProxy.defaults={scope:"singleton",end:0}});perfmjs.plugin("fsm",function(a){a.base("fsm",{init:function(){if(this.options.initial){this.option("current",this.options.initial["from"]);this.options.stateMap[this.options.initial["event"]]={};this.options.stateMap[this.options.initial["event"]][this.options.current]=this.options.initial["to"];if(!this.options.initial["defer"]){this.event(this.options.initial["event"])}}return this},event:function(b){this.transition(b)},transition:function(d){var b=false,c=this.options.current;if(!!this["onEnterFrom"+this.upperCaseFirst(this.options.current)]){b=this["onEnterFrom"+this.upperCaseFirst(this.options.current)](d)}else{b=this.onEnterEvent(d)}if(typeof b!=="undefined"&&!b){return}if(!!this["onLeaveFrom"+this.upperCaseFirst(this.options.current)]){b=this["onLeaveFrom"+this.upperCaseFirst(this.options.current)](d)}else{b=this.onLeaveCurrentState(d)}if(typeof b!=="undefined"&&!b){return}if(this.options.stateMap[d][c]!==this.options.current){alert("========"+this.options.stateMap[d][c]+"/"+this.current());return}if(!!this["onEnterTo"+this.upperCaseFirst(this.options.current)]){b=this["onEnterTo"+this.upperCaseFirst(this.options.current)](d)}else{b=this.onEnterNewState(d)}if(typeof b!=="undefined"&&!b){return}if(!!this["onLeaveTo"+this.upperCaseFirst(this.options.current)]){this["onLeaveTo"+this.upperCaseFirst(this.options.current)](d)}else{this.onLeaveEvent(d)}},current:function(){return this.options.current},is:function(b){return this.options.current===b},can:function(b){return this.options.stateMap[b].hasOwnProperty(this.options.current)||this.options.stateMap[b].hasOwnProperty(this.options.WILDCARD)},cannot:function(b){return !this.can(b)},isFinished:function(){return this.is(this.options.terminal)},upperCaseFirst:function(b){return b.substring(0,1).toUpperCase()+b.substring(1)},onEnterEvent:function(b){},onLeaveCurrentState:function(b){this.option("current",this.options.stateMap[b][this.options.current]||this.options.current)},onEnterNewState:function(b){},onLeaveEvent:function(b){},end:0});a.fsm.defaults={initial:{event:"startup",from:"init",to:"final",defer:false},stateMap:{},current:"init",terminal:"final",WILDCARD:"*",version:"1.0.0",scope:"singleton",end:0}});perfmjs.plugin("app",function(a){a.base("app",{init:function(b){this.moduleData={};this.eventProxy=a.eventProxy.newInstance();return this},register:function(e,d,c){if(c==null){c={}}try{this._addModule(e,d,c);if(c.init){return this.start(e)}return true}catch(b){if(!DEBUG_MOD){perfmjs.logger.error("could not register "+e+" because: "+b.message)}else{throw b}return false}},unregister:function(b){if(this.moduleData[b]!=null){delete this.moduleData[b];return true}else{return false}},start:function(e){try{if(this.moduleData[e]==null){throw new Error("module "+e+" does not exist")}var d=this.moduleData[e].options;if(d==null){d={}}var b=this._createInstance(e,d);if(b.running===true){throw new Error("module "+e+" was already started")}if(typeof b.init!=="function"){throw new Error("module "+e+" do not have an init function")}b.option(b.options);b.running=true;this.moduleData[e].instance=b;if(typeof d.callback==="function"){d.callback()}return true}catch(c){if(!DEBUG_MOD){perfmjs.logger.error(e+" init Error: "+c.message)}else{throw c}return false}},startAll:function(){var c,b=[];for(c in this.moduleData){if(this.moduleData.hasOwnProperty(c)){b.push(this.start(c))}}this.eventProxy.emit(a.sysconfig.events.moduleIsReady);return b},stop:function(c){var b=this.moduleData[c];if(b.instance){if(a.utils.isFunction(b.instance.destroy)){b.instance.destroy()}b.instance.running=false;b.instance=null;return true}else{return false}},stopAll:function(){var c,b;b=[];for(c in this.moduleData){if(this.moduleData.hasOwnProperty(c)){b.push(this.stop(c))}}return b},restart:function(b){if(this.stop(b)){return this.start(b)}return false},_addModule:function(e,d,c){if(typeof e!=="string"){throw new Error("moudule ID has to be a string")}var b=d;if(typeof d==="string"){d=this._parseFunction(d)}if(typeof d!=="function"){throw new Error(d+" creator "+b+" has to be a constructor function")}if(typeof c!=="object"){throw new Error("option parameter has to be an object")}if(this.moduleData[e]!=null){throw new Error("module was already registered")}this.moduleData[e]={creator:d,options:c};return true},_createInstance:function(d,c){var b=this.moduleData[d];if(b.instance!=null){return b.instance}return b.creator.newInstance(a.eventProxy.newInstance(),c);return instance},_parseFunction:function(e){var c=e.split("."),b=c.length,f=window;for(var d=(a.utils.isWindow(c[0])?1:0);d<b;d++){if(a.utils.isFunction(f[c[d]])||a.utils.isPlainObject(f[c[d]])){f=f[c[d]]}else{return null}}if(a.utils.isFunction(f)){return f}return null},end:0});a.app.defaults={scope:"singleton",end:0}});